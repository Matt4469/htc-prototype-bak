var nav=function(){"use strict";var e={init:function(){e.stopOnSingleContent(),e.superCategoryClick(),e.subCategoryClick()},getHeight:function(e){var s=parseInt(e.css("padding-top").replace("px",""),10),t=parseInt(e.css("padding-bottom").replace("px",""),10);return e.height()+s+t},superCategoryClick:function(){$(".nav > li > a").on("click",function(){if(void 0===$(this).attr("href")){e.removeBoldClass();var s=$(".nav li.selected"),t=s.find(".nav-sub"),a=$(this).parent("li"),n=$(this).siblings(".nav-sub");a.hasClass("selected")?(s.removeClass("selected"),e.collapseSelf(t,function(){e.closeAllSubCategory()})):(n.removeClass("no-border"),s.removeClass("selected"),a.addClass("selected"),e.expandSubMenu(n,t,function(){e.closeAllSubCategory()}))}})},collapseSelf:function(e,s){var t=new TimelineMax({onComplete:s});t.fromTo($(e),.5,{height:"auto"},{height:0}),t.play()},expandSubMenu:function(e,s,t){var a=new TimelineLite({onComplete:t}),n=0,l=0,i=$(e).parent().offset().top;a.add(TweenLite.set($(e),{height:"auto"})),a.add(TweenLite.from($(e),.4,{height:0})),s&&(n=$(e).height(),l=$(s).height(),e.parent("li").index()>s.parent("li").index()&&(i=$(e).parent().offset().top+n-l),a.fromTo($(s),.4,{height:"auto"},{height:0},"-=0.4")),a.to(window,.5,{scrollTo:{y:i,offsetY:70}},"-=0.4")},closeAllSubCategory:function(){$(".nav-sub li").removeClass("selected"),$(".nav-sub-sub").css({"max-height":0})},subCategoryClick:function(){$(".nav-sub > li > a").on("click",function(){e.removeBoldClass();var s=$(this).siblings(".nav-sub-sub"),t=$(this).parent("li");t.hasClass("selected")?(s.css({"max-height":0}).removeClass("selected"),t.removeClass("selected")):(s.removeClass("selected"),s.length>0&&s.each(function(s,t){var a=0;$(this).find("li").each(function(){a+=e.getHeight($(this))}),$(this).css({"max-height":a})}),$(this).parents(".nav-sub").addClass("no-border"),t.addClass("selected")),$(this).parents(".nav-sub").find(">li.selected").length<1&&$(this).parents(".nav-sub").removeClass("no-border")})},scrollAnimate:function(e){return setTimeout(function(){var s=$(e).first().offset();$("body, html").animate({scrollTop:s.top-100},500)},1),!1},removeBoldClass:function(){$(".nav a").removeClass("bold")},removeTopArticleSelected:function(){var e=$(".nav > li.selected");e.length>0&&(e.first().removeClass("selected"),e.first().find("a").removeClass("bold"))},stopOnSingleContent:function(){var s=$.url().attr("path");$.each($(".nav li"),function(e,t){var a=$(this).find("a").attr("href");if(void 0!==a){var n=$.url(a).attr("path");""!==n&&s.indexOf(n)>-1&&($(this).parents("ul").addClass("no-border").addClass("open"),$(this).addClass("selected"),$(this).parents("li").addClass("selected"),$(this).parent().siblings().addClass("open"),$(this).parents("ul").siblings("a").addClass("bold"),$(this).find("a").addClass("bold"))}}),commonSetting.isMobile()&&$("body").hasClass("m-landing-page")&&($(".nav li a").removeClass("bold"),$("body").hasClass("product-content-page-init")&&e.removeTopArticleSelected()),$("body").hasClass("m-content-page")&&e.removeTopArticleSelected()}};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9uYXYuanMiXSwibmFtZXMiOlsibmF2IiwiaW5pdCIsInN0b3BPblNpbmdsZUNvbnRlbnQiLCJzdXBlckNhdGVnb3J5Q2xpY2siLCJzdWJDYXRlZ29yeUNsaWNrIiwiZ2V0SGVpZ2h0IiwiaW5wdXRMaSIsInBhZGRpbmdUb3AiLCJwYXJzZUludCIsImNzcyIsInJlcGxhY2UiLCJwYWRkaW5nQm90dG9tIiwiaGVpZ2h0IiwiJCIsIm9uIiwidGhpcyIsImF0dHIiLCJyZW1vdmVCb2xkQ2xhc3MiLCJvcGVuZWRDYXRlZ29yeSIsIm9wZW5lZE1lbnUiLCJmaW5kIiwiZXhwYW5kQ2F0ZWdvcnkiLCJwYXJlbnQiLCJleHBhbmRNZW51Iiwic2libGluZ3MiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiY29sbGFwc2VTZWxmIiwiY2xvc2VBbGxTdWJDYXRlZ29yeSIsImFkZENsYXNzIiwiZXhwYW5kU3ViTWVudSIsImVsZW1lbnQiLCJjYWxsYmFjayIsInRpbWVMaW5lT2JqIiwiVGltZWxpbmVNYXgiLCJvbkNvbXBsZXRlIiwiZnJvbVRvIiwicGxheSIsIm9wZW5kRWxlbWVudCIsIlRpbWVsaW5lTGl0ZSIsImV4cGFuZEhlaWdodCIsImNvbGxhcHNlSGVpZ2h0IiwibmV3UG9zaXRpb24iLCJvZmZzZXQiLCJ0b3AiLCJhZGQiLCJUd2VlbkxpdGUiLCJzZXQiLCJmcm9tIiwiaW5kZXgiLCJ0byIsIndpbmRvdyIsInNjcm9sbFRvIiwieSIsIm9mZnNldFkiLCJtYXgtaGVpZ2h0Iiwic3ViTmFuaSIsInBhcmVudExpIiwibGVuZ3RoIiwiZWFjaCIsInZhbCIsInVsSGVpZ2h0IiwicGFyZW50cyIsInNjcm9sbEFuaW1hdGUiLCJzZXRUaW1lb3V0IiwiZmlyc3QiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwicmVtb3ZlVG9wQXJ0aWNsZVNlbGVjdGVkIiwiYm9sZExpbmsiLCJjdXJyZW50VXJsUGF0aCIsInVybCIsImluc2lkZUxpbmsiLCJpbnNpZGVQYXRoIiwiaW5k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QUFFRSxNQUFNSyxLQUFLLEtBQUtTLFNBQVMsWUFJbkM4QyxjQUFjQyxZQUFjL0QsRUFBRSxRQUFRWSxTQUFTLG9CQUMvQ1osRUFBRSxhQUFhYSxZQUFZLFFBQ3ZCYixFQUFFLFFBQVFZLFNBQVMsOEJBQ25CekIsRUFBSW9FLDRCQUdSdkQsRUFBRSxRQUFRWSxTQUFTLG1CQUNuQnpCLEVBQUlvRSw0QkFJaEIsT0FBT3BFIiwiZmlsZSI6ImxpYi9uYXYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBjb21tb25TZXR0aW5nLCBUd2VlbkxpdGUsIFRpbWVsaW5lTWF4LCBUaW1lbGluZUxpdGUsIFBvd2VyMiovXG52YXIgbmF2ID0gKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgc3BlZWQgPSA1MDAsXG4gICAgICAgIGVhc2luZyA9ICdlYXNlT3V0Q3ViaWMnO1xuICAgIHZhciBuYXYgPSB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmF2LnN0b3BPblNpbmdsZUNvbnRlbnQoKTtcbiAgICAgICAgICAgIG5hdi5zdXBlckNhdGVnb3J5Q2xpY2soKTtcbiAgICAgICAgICAgIG5hdi5zdWJDYXRlZ29yeUNsaWNrKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEhlaWdodDogZnVuY3Rpb24oaW5wdXRMaSkge1xuICAgICAgICAgICAgdmFyIHBhZGRpbmdUb3AgPSBwYXJzZUludChpbnB1dExpLmNzcygncGFkZGluZy10b3AnKS5yZXBsYWNlKCdweCcsICcnKSwgMTApLFxuICAgICAgICAgICAgICAgIHBhZGRpbmdCb3R0b20gPSBwYXJzZUludChpbnB1dExpLmNzcygncGFkZGluZy1ib3R0b20nKS5yZXBsYWNlKCdweCcsICcnKSwgMTApO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0TGkuaGVpZ2h0KCkgKyBwYWRkaW5nVG9wICsgcGFkZGluZ0JvdHRvbTtcbiAgICAgICAgfSxcbiAgICAgICAgc3VwZXJDYXRlZ29yeUNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5uYXYgPiBsaSA+IGEnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICQodGhpcykuYXR0cignaHJlZicpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBuYXYucmVtb3ZlQm9sZENsYXNzKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcGVuZWRDYXRlZ29yeSA9ICQoJy5uYXYgbGkuc2VsZWN0ZWQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5lZE1lbnUgPSBvcGVuZWRDYXRlZ29yeS5maW5kKCcubmF2LXN1YicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kQ2F0ZWdvcnkgPSAkKHRoaXMpLnBhcmVudCgnbGknKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZE1lbnUgPSAkKHRoaXMpLnNpYmxpbmdzKCcubmF2LXN1YicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV4cGFuZENhdGVnb3J5Lmhhc0NsYXNzKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRNZW51LnJlbW92ZUNsYXNzKCduby1ib3JkZXInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5lZENhdGVnb3J5LnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kQ2F0ZWdvcnkuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXYuZXhwYW5kU3ViTWVudShleHBhbmRNZW51LCBvcGVuZWRNZW51LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXYuY2xvc2VBbGxTdWJDYXRlZ29yeSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuZWRDYXRlZ29yeS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdi5jb2xsYXBzZVNlbGYob3BlbmVkTWVudSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2LmNsb3NlQWxsU3ViQ2F0ZWdvcnkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbGxhcHNlU2VsZjogZnVuY3Rpb24oZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciB0aW1lTGluZU9iaiA9IG5ldyBUaW1lbGluZU1heCh7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogY2FsbGJhY2tcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGltZUxpbmVPYmouZnJvbVRvKCQoZWxlbWVudCksIDAuNSwge1xuICAgICAgICAgICAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRpbWVMaW5lT2JqLnBsYXkoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXhwYW5kU3ViTWVudTogZnVuY3Rpb24oZWxlbWVudCwgb3BlbmRFbGVtZW50LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIHRpbWVMaW5lT2JqID0gbmV3IFRpbWVsaW5lTGl0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVySGVpZ2h0ID0gNzAsXG4gICAgICAgICAgICAgICAgZXhwYW5kSGVpZ2h0ID0gMCxcbiAgICAgICAgICAgICAgICBjb2xsYXBzZUhlaWdodCA9IDAsXG4gICAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSAkKGVsZW1lbnQpLnBhcmVudCgpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgIC8vZXhwYW5kXG4gICAgICAgICAgICB0aW1lTGluZU9iai5hZGQoVHdlZW5MaXRlLnNldCgkKGVsZW1lbnQpLCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBcImF1dG9cIlxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGltZUxpbmVPYmouYWRkKFR3ZWVuTGl0ZS5mcm9tKCQoZWxlbWVudCksIDAuNCwge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgLy9jb2xsYXBzZVxuICAgICAgICAgICAgaWYgKG9wZW5kRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGV4cGFuZEhlaWdodCA9ICQoZWxlbWVudCkuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgY29sbGFwc2VIZWlnaHQgPSAkKG9wZW5kRWxlbWVudCkuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQucGFyZW50KCdsaScpLmluZGV4KCkgPiBvcGVuZEVsZW1lbnQucGFyZW50KCdsaScpLmluZGV4KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSAkKGVsZW1lbnQpLnBhcmVudCgpLm9mZnNldCgpLnRvcCArIGV4cGFuZEhlaWdodCAtIGNvbGxhcHNlSGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aW1lTGluZU9iai5mcm9tVG8oJChvcGVuZEVsZW1lbnQpLCAwLjQsIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMFxuICAgICAgICAgICAgICAgIH0sICctPTAuNCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9zY3JvbGwgdG8gc3VwZXIgY2F0ZWdvcnlcbiAgICAgICAgICAgIC8vIHRpbWVMaW5lT2JqLmFkZChUd2VlbkxpdGUudG8od2luZG93LCAwLjUsIHtcbiAgICAgICAgICAgIC8vICAgICBzY3JvbGxUbzoge1xuICAgICAgICAgICAgLy8gICAgICAgICB5OiBuZXdQb3NpdGlvbixcbiAgICAgICAgICAgIC8vICAgICAgICAgb2Zmc2V0WTogaGVhZGVySGVpZ2h0XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfSwnLT0wLjUnKSk7XG4gICAgICAgICAgICAvLyBcbiAgICAgICAgICAgIHRpbWVMaW5lT2JqLnRvKHdpbmRvdywgMC41LCB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG86IHtcbiAgICAgICAgICAgICAgICAgICAgeTogbmV3UG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFk6IGhlYWRlckhlaWdodFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sICctPTAuNCcpO1xuICAgICAgICAgICAgLy90aW1lTGluZU9iai5wbGF5KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNsb3NlQWxsU3ViQ2F0ZWdvcnk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLm5hdi1zdWIgbGknKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICQoJy5uYXYtc3ViLXN1YicpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ21heC1oZWlnaHQnOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc3ViQ2F0ZWdvcnlDbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcubmF2LXN1YiA+IGxpID4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG5hdi5yZW1vdmVCb2xkQ2xhc3MoKTtcbiAgICAgICAgICAgICAgICB2YXIgc3ViTmFuaSA9ICQodGhpcykuc2libGluZ3MoJy5uYXYtc3ViLXN1YicpLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRMaSA9ICQodGhpcykucGFyZW50KCdsaScpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyZW50TGkuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy91cGRhdGUgcGFyZW50IC5uYXYtc3ViIG1heC1oZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgLy8gJCh0aGlzKS5wYXJlbnRzKCcubmF2LXN1YicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAnbWF4LWhlaWdodCc6IDMwMDBcbiAgICAgICAgICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAgICAgICAgIHN1Yk5hbmkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWJOYW5pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk5hbmkuZWFjaChmdW5jdGlvbihpbmRleCwgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogaXRlcmF0ZSB0aHJvdWdoIGFycmF5IG9yIG9iamVjdCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bEhlaWdodCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdsaScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsSGVpZ2h0ICs9IG5hdi5nZXRIZWlnaHQoJCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWF4LWhlaWdodCc6IHVsSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5uYXYtc3ViJykuYWRkQ2xhc3MoJ25vLWJvcmRlcicpO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRMaS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdWJOYW5pLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWF4LWhlaWdodCc6IDBcbiAgICAgICAgICAgICAgICAgICAgfSkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudExpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5wYXJlbnRzKCcubmF2LXN1YicpLmZpbmQoJz5saS5zZWxlY3RlZCcpLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubmF2LXN1YicpLnJlbW92ZUNsYXNzKCduby1ib3JkZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc2Nyb2xsQW5pbWF0ZTogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gJChlbGVtZW50KS5maXJzdCgpLm9mZnNldCgpO1xuICAgICAgICAgICAgICAgICQoXCJib2R5LCBodG1sXCIpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IG9mZnNldC50b3AgLSAxMDBcbiAgICAgICAgICAgICAgICB9LCBzcGVlZCk7XG4gICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlQm9sZENsYXNzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5uYXYgYScpLnJlbW92ZUNsYXNzKCdib2xkJyk7XG4gICAgICAgICAgICAvLyAkKCcubmF2IHVsJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlVG9wQXJ0aWNsZVNlbGVjdGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBib2xkTGluayA9ICQoJy5uYXYgPiBsaS5zZWxlY3RlZCcpO1xuICAgICAgICAgICAgaWYgKGJvbGRMaW5rLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvL3JlbW92ZSB0b3AgYXJ0aWxlcyBzdXBlciBjYXRlZ29yeVxuICAgICAgICAgICAgICAgIGJvbGRMaW5rLmZpcnN0KCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgYm9sZExpbmsuZmlyc3QoKS5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2JvbGQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3RvcE9uU2luZ2xlQ29udGVudDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFVybFBhdGggPSAkLnVybCgpLmF0dHIoJ3BhdGgnKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjdXJyZW50VXJsPScgKyBjdXJyZW50VXJsUGF0aCk7XG4gICAgICAgICAgICAkLmVhY2goJCgnLm5hdiBsaScpLCBmdW5jdGlvbihpbmRleCwgdmFsKSB7XG4gICAgICAgICAgICAgICAgLyogaXRlcmF0ZSB0aHJvdWdoIGFycmF5IG9yIG9iamVjdCAqL1xuICAgICAgICAgICAgICAgIHZhciBpbnNpZGVMaW5rID0gJCh0aGlzKS5maW5kKCdhJykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdpbnNpZGVMaW5rID0gJyArIGluc2lkZUxpbmspO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW5zaWRlTGluayAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc2lkZVBhdGggPSAkLnVybChpbnNpZGVMaW5rKS5hdHRyKCdwYXRoJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNpZGVQYXRoICE9PSAnJyAmJiBjdXJyZW50VXJsUGF0aC5pbmRleE9mKGluc2lkZVBhdGgpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygndWwnKS5hZGRDbGFzcygnbm8tYm9yZGVyJykuYWRkQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ2xpJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkuYWRkQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygndWwnKS5zaWJsaW5ncygnYScpLmFkZENsYXNzKCdib2xkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2EnKS5hZGRDbGFzcygnYm9sZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29tbW9uU2V0dGluZy5pc01vYmlsZSgpICYmICQoJ2JvZHknKS5oYXNDbGFzcygnbS1sYW5kaW5nLXBhZ2UnKSkge1xuICAgICAgICAgICAgICAgICQoJy5uYXYgbGkgYScpLnJlbW92ZUNsYXNzKCdib2xkJyk7XG4gICAgICAgICAgICAgICAgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygncHJvZHVjdC1jb250ZW50LXBhZ2UtaW5pdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hdi5yZW1vdmVUb3BBcnRpY2xlU2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdtLWNvbnRlbnQtcGFnZScpKSB7XG4gICAgICAgICAgICAgICAgbmF2LnJlbW92ZVRvcEFydGljbGVTZWxlY3RlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gbmF2O1xufSgpKTsiXX0=
