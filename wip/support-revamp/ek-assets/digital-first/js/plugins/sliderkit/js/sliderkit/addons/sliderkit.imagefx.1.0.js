!function(t){SliderKit.prototype.imageFx=function(){var e=this,i={strip:e.options.cssprefix+"-strip",imageFxAnchor:e.options.cssprefix+"-imagefx-anchor",textbox:e.options.cssprefix+"-panel-textbox"},a={fxType:"curtain",fxDelay:60,strips:10,stripOrientation:"default",stripPosition:"default",stripDirection:"default",fxDuration:500},r=new Array("default","curtain","zipper","wave","fountain"),s=function(t,e){var i=t.length;if(0==i)return!1;for(;i--;){var a=Math.floor(Math.random()*(i+1)),r=t[i],s=t[a];t[i]=s,t[a]=r,e[i]=s,e[a]=r}},n=function(){e.panels.removeClass(e.cssNames.panelActive).hide(),e.currPanel.addClass(e.cssNames.panelActive).show().find("img").hide(),e.options.delaycaptions||t("."+i.textbox,e.currPanel).hide().fadeIn()},o=function(a,r,n,o){var p=new Array,l=new Array,c=1,f=0,d=null,x=0,u="",g="",h="",m="",v=0,y="",b=0,D="reverse"==a.stripOrientation?e.domObjHeight:e.domObjWidth,O=parseInt(D/a.strips),w=null,P=t("."+i.strip,e.panelsBag),T=D%a.strips;switch(a.fxType){case"zipper":a.stripPosition="alternate",a.stripDirection=null;break;case"wave":break;case"curtain":a.stripPosition=null;break;case"fountain":"random"!=a.stripDirection&&"default"!=a.stripDirection&&(a.stripDirection="default")}for("reverse"==a.stripOrientation?(u="top",g="left",h="right",m="height",y="width",b=e.domObjWidth,d={width:e.domObjWidth,opacity:1}):(a.stripOrientation="default",u="left",g="top",h="bottom",m="width",y="height",b=e.domObjHeight,d={height:e.domObjHeight,opacity:1}),j=1;j<a.strips+1;j++)w=P.eq(j-1),T>0?(v=O+1,T--):v=O,w.css(u,x+"px").css(g,"0").css(m,v+"px").css(y,b+"px"),w.css("background-position","default"==a.stripOrientation?-x+"px 0":"0 "+-x+"px"),x+=v,("reverse"==a.stripPosition||j%2==0&&"alternate"==a.stripPosition)&&(w.css(h,"0"),w.css(g,"auto")),"fountain"==a.fxType?(p[j-1]=parseInt(a.strips/2)-parseInt(j/2)*c,p[a.strips-1]=a.strips,c*=-1):p[j-1]=j,l[j-1]=v;"random"==a.stripDirection?s(p,l):"reverse"==a.stripDirection&&1==p[0]||"alternate"==a.stripPosition?(p.reverse(),l.reverse()):"auto"==a.stripDirection&&("+="==o&&1==p[0]||"-="==o&&p[0]==a.strips)&&(p.reverse(),l.reverse()),e.panelsBag.css("background",'transparent url("'+n+'") no-repeat 0 0'),P.css("curtain"==a.fxType?m:y,"0"),f=-1;var z=setInterval(function(){f++,"curtain"==a.fxType&&(d="default"==a.stripOrientation?{width:l[f],opacity:1}:{height:l[f],opacity:1}),f==a.strips&&clearInterval(z),P.eq(p[f]-1).css({opacity:0,"z-index":3,"background-image":"url("+r+")"}).stop().animate(d,a.fxDuration)},a.fxDelay)};e.imageFx.init=function(){0==e.panelsBag.children("img").size&&e._errorReport("ImageFx #01",e.options.debug,1),e.options.fastchange=!1;var r=t.extend({},a,e.options.imagefx);if((r.strips<1||void 0==r.strips||isNaN(r.strips))&&(r.strips=a.strips),(r.fxDelay<0||void 0==r.fxDelay||isNaN(r.fxDelay))&&(r.fxDelay=a.fxDelay),e.options.panelfxspeed=r.fxDelay*r.strips,e.options.auto&&e.options.autospeed<e.options.panelfxspeed&&(e.options.autospeed=e.options.panelfxspeed),e._wrapPanels(),e.panelsBag.css({background:'transparent url("'+t("img",e.currPanel).attr("src")+'") no-repeat 0 0',position:"relative",height:e.domObjHeight,width:e.domObjWidth}),t("."+i.textbox,e.domObj).css("z-index","4"),t("."+i.strip,e.domObj).size()<1){var s="";for(j=1;j<r.strips+1;j++)s+='<div class="'+i.strip+'" style="float:left;position:absolute;z-index:3"></div>';e.panelsBag.append(s)}e.panelsBag.prepend('<a href="#" class="'+i.imageFxAnchor+'" style="position:absolute;top:0;left:0;display:none;z-index:6;width:100%;height:100%;"></a>')},e.imageFx.remove=function(){var a=t("."+i.strip,e.domObj);a.size()>0&&(a.remove(),e.panelsBag.css("background-image","none"),t("img",e.panels).show())},e._panelTransitions.fancy=function(s,p,l){e.animating=!0;var c=t("."+i.textbox,e.prevPanelStill);c.size()>0?c.animate({opacity:0},500,function(){n(),c.css({opacity:1})}):n();var f=t.extend({},a,e.options.imagefx);if("random"!=f.fxType&&r.indexOf(f.fxType)<0)e._errorReport("ImageFx #02",e.options.debug,0),f.fxType="curtain";else switch(f.fxType){case"random":f.fxType=r[Math.floor(Math.random()*r.length)];break;case"default":f.fxType=a.fxType}var d=t("."+i.imageFxAnchor,e.panelsBag),x=t("a:first-child",e.currPanel);void 0!=x.attr("href")?d.attr({href:x.attr("href"),title:x.attr("title"),target:x.attr("target")}).show():d.hide();var u=t("img",e.prevPanelStill).attr("src"),g=t("img",e.currPanel).attr("src");if(void 0==u||void 0==g)e._errorReport("ImageFx #03",e.options.debug,0);else{o(f,g,u,s);var h=setInterval(function(){0==t(":animated",e.panelsBag).size()&&(clearInterval(h),l(),e.options.delaycaptions||e.options.fastchange||setTimeout(function(){e.animating=!1},50))},100)}},"fancy"==e.options.panelfx&&e.imageFx.init()}}(jQuery);