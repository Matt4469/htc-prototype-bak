var carrierPopup=function(){"use strict";var t,e,i={init:function(){t=$(".carrier-popup"),e=$(".carrier-fake-dropdown"),t.length>0&&e.length>0&&(i.selectDefault(),i.openPopupWindow(),i.closeBtnClick(),i.popupListClick())},openPopupWindow:function(){e.click(function(){t.addClass("show"),$("body").addClass("support-popup-fixed")})},closeBtnClick:function(){t.find(".btn-close").click(function(){t.removeClass("show"),$("body").removeClass("support-popup-fixed")})},popupListClick:function(){t.find(".popup-list > li").click(function(){location.href=$(this).data("url")})},selectDefault:function(){$.each(t.find(".popup-list > li"),function(t,i){if(location.href.indexOf($(this).data("url"))>-1)return e.text($(this).text()),!1})}};return i}(),userGuidePopup=function(){"use strict";var t,e,i={init:function(){t=$(".user-guide-popup"),e=$(".user-guide-fake-dropdown"),t.length>0&&e.length>0&&(i.openPopupWindow(),i.closeBtnClick())},openPopupWindow:function(){e.click(function(){t.addClass("show"),$("body").addClass("support-popup-fixed")})},closeBtnClick:function(){t.find(".btn-close").click(function(){t.removeClass("show"),$("body").removeClass("support-popup-fixed")})}};return i}(),articleList=function(){"use strict";var t={init:function(){t.showMoreClick()},showMoreClick:function(){var t=$(".article-area article"),e=$(".btn-show-more-articles");t.length>0&&e.length>0&&e.on("click",function(){$(this).toggleClass("showed"),t.toggleClass("showed"),$(this).hasClass("showed")?$(this).find("span").text($(this).data("show-less")):$(this).find("span").text($(this).data("show-more"))})}};return t}(),video=function(){"use strict";var t,e={init:function(){$(".video-area").length>0&&(e.resetMaxVideos(),e.updateDisplayVideoItems(),e.setupDisplayVideoItems(),e.videoListInit(),e.videoMaskInit(),e.showMoreVideoClick(),e.trimVideoName())},trimVideoName:function(){$(".video-name").dotdotdot({ellipsis:"...",wrap:"word",height:52,tolerance:8})},resetMaxVideos:function(){var e=$(window).width();t=e>commonSetting.mobileMaxReserlution()?5:e<=commonSetting.mobileMaxReserlution()&&e>480?3:2},updateDisplayVideoItems:function(){var i=$(".btn-show-more-video"),o=$(".video-list"),n=$(".video-list li").not(".buffer-item");o.removeClass("show-2-video").removeClass("show-3-video").removeClass("show-5-video"),o.addClass("show-"+t+"-video"),i.removeClass("showed"),e.resetShowMoreVideoText($(this)),$.each(n,function(e,i){$(this).addClass("hidden"),e<t&&$(this).removeClass("hidden")}),n.length>t?i.removeClass("disabled"):i.addClass("disabled")},setupDisplayVideoItems:function(){commonSetting.switchResolution()&&(e.resetMaxVideos(),e.updateDisplayVideoItems())},resetShowMoreVideoText:function(t){$(t).hasClass("showed")?$(t).find("span").text($(t).data("show-less")):$(t).find("span").text($(t).data("show-more"))},showMoreVideoClick:function(){$(".btn-show-more-video").off("click").on("click",function(){var i=$(".video-list li").not(".buffer-item");$(this).toggleClass("showed"),e.resetShowMoreVideoText($(this)),$.each(i,function(e,i){e>=t&&$(this).toggleClass("hidden")}),i.length>t?$(this).removeClass("disabled"):$(this).addClass("disabled")})},videoMaskInit:function(){$(".video-mask").click(function(){var t=$(".video-list").find("li:nth-of-type(1)").attr("id");$("iframe").attr("src","http://www.youtube.com/embed/"+t+"?rel=0&autoplay=1"),$(".video-iframe").show(),$(this).addClass("hidden"),$(this).hide()})},videoListInit:function(){var t="";$(".video-list").find("li").click(function(){$(this).hasClass("play")||($("li.play").removeClass("play"),$(this).addClass("play"),t=$(this).attr("id"),$(".video-iframe").show(),$(".video-mask").addClass("hidden"),$("iframe").attr("src","http://www.youtube.com/embed/"+t+"?rel=0&autoplay=1"))})}};return e}(),ratingArticle=function(){"use strict";var t,e,i,o,n,s,a,d,l,r,u,c,p,h,f,m,v={init:function(){void 0!==(t=$(".rating-container"))&&(e=t.find(".btn-yes"),i=t.find(".btn-no"),o=t.find(".btn-submit"),n=t.find(".question-block"),s=t.find(".feedback-block"),a=t.find(".thank-you-block"),m=t.find(".txt-comment"),d=t.data("type"),"howto"===d&&(d="ditahowto"),l=t.data("id"),r=t.data("site"),u=t.data("siteid"),c=t.data("pid"),p=t.data("pname"),v.buttonYesSetup(),v.buttonNoSetup(),v.buttonSubmitSetup())},buttonYesSetup:function(){e.on("click",function(t){t.preventDefault(),n.addClass("hidden");h="1",f="/"+r+"/support/SupportViewCountAdd.aspx?act=up&type="+d+"&id="+l+"&siteid="+u+"&p_id="+c+"&p_name="+p+"&value="+h+"&cmt=",$.ajax({url:f,dataType:"html",type:"POST",error:function(t){a.removeClass("hidden")},success:function(t){a.removeClass("hidden")}})})},buttonNoSetup:function(){i.on("click",function(t){t.preventDefault(),n.addClass("hidden"),setTimeout(function(){s.removeClass("hidden")},600)})},buttonSubmitSetup:function(){o.on("click",function(t){t.preventDefault();var e=m.val();if(e.length>0){s.addClass("hidden");h="0",f="/"+r+"/support/SupportViewCountAdd.aspx?act=down&type="+d+"&id="+l+"&siteid="+u+"&p_id="+c+"&p_name="+p+"&value="+h+"&cmt="+e,$.ajax({url:f,dataType:"html",type:"POST",error:function(t){a.removeClass("hidden")},success:function(t){a.removeClass("hidden")}})}})}};return v}(),singleContentPage=function(){"use strict";return{resetTitle:function(){if($(".product-content-page").length>0&&$(".video-area").length>0){var t=$(".topictitle1").clone().addClass("appendTitle");$(".topictitle1").hide(),$(".video-area").prepend(t).addClass("appendToContent")}}}}(),relateContent=function(){"use strict";return{init:function(){var t=$(".relinfo"),e=$(".relatedTitle");null!==t&&t.length>0&&($(".related-howtos-wrapper").empty(),$(".related-howtos-wrapper").append(t.html()),$(".related-howtos-wrapper").addClass("show"),t.empty(),$(".related-links-wrapper").find("strong").html(e.html()))}}}(),productLanding=function(){"use strict";var t={init:function(){t.scrollToAnchor()},scrollToAnchor:function(){var t,e=$(location).attr("hash");""!==e&&(t=$(e).offset().top-70,$("html,body").animate({scrollTop:t},"slow"))}};return t}();$(document).ready(function(){"use strict";productLanding.init(),nav.init(),carrierPopup.init(),userGuidePopup.init(),articleList.init(),ratingArticle.init(),video.init(),singleContentPage.resetTitle(),relateContent.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3QtbGFuZGluZy5qcyJdLCJuYW1lcyI6WyJjYXJyaWVyUG9wdXAiLCJfbWFpblBvcHVwIiwiX2Zha2VEcm9wZG93biIsImluaXQiLCIkIiwibGVuZ3RoIiwic2VsZWN0RGVmYXVsdCIsIm9wZW5Qb3B1cFdpbmRvdyIsImNsb3NlQnRuQ2xpY2siLCJwb3B1cExpc3RDbGljayIsImNsaWNrIiwiYWRkQ2xhc3MiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJsb2NhdGlvbiIsImhyZWYiLCJ0aGlzIiwiZGF0YSIsImVhY2giLCJpbmRleCIsInZhbCIsImluZGV4T2YiLCJ0ZXh0IiwidXNlckd1aWRlUG9wdXAiLCJhcnRpY2xlTGlzdCIsInNob3dNb3JlQ2xpY2siLCJsaXN0cyIsInNob3dNb3JlQnRuIiwib24iLCJ0b2dnbGVDbGFzcyIsImhhc0NsYXNzIiwidmlkZW8iLCJfc2hvd01heFZpZGVvIiwicmVzZXRNYXhWaWRlb3MiLCJ1cGRhdGVEaXNwbGF5VmlkZW9JdGVtcyIsInNldHVwRGlzcGxheVZpZGVvSXRlbXMiLCJ2aWRlb0xpc3RJbml0IiwidmlkZW9NYXNrSW5pdCIsInNob3dNb3JlVmlkZW9DbGljayIsInRyaW1WaWRlb05hbWUiLCJkb3Rkb3Rkb3QiLCJlbGxpcHNpcyIsIndyYXAiLCJoZWlnaHQiLCJ0b2xlcmFuY2UiLCJ3aW5kb3dTaXplIiwid2luZG93Iiwid2lkdGgiLCJjb21tb25TZXR0aW5nIiwibW9iaWxlTWF4UmVzZXJsdXRpb24iLCJzaG93TW9yZVZpZGVvQnRuIiwidmlkZW9Db250YWluZXIiLCJ2aWRlb0xpc3RJdGVtcyIsIm5vdCIsInJlc2V0U2hvd01vcmVWaWRlb1RleHQiLCJzd2l0Y2hSZXNvbHV0aW9uIiwidGFyZ2V0T2JqIiwib2ZmIiwidmlkZW9JZCIsImF0dHIiLCJzaG93IiwiaGlkZSIsInJhdGluZ0FydGljbGUiLCJfcmF0aW5nQ29udGFpbmVyIiwiX2J1dHRvblllcyIsIl9idXR0b25ObyIsIl9idXR0b25TdWJtaXQiLCJfYmxvY2tRdWVzdGlvbiIsIl9ibG9ja0ZlZWRiYWNrIiwiX2Jsb2NrVGhhbmt5b3UiLCJfcGFnZXR5cGUiLCJfdGFyZ2V0aWQiLCJfc2l0ZSIsIl9zaXRlaWQiLCJfcGlkIiwiX3BuYW1lIiwiX3ZhbHVlIiwiX3Nsb3R1cmwiLCJfdGV4dGFyZWFDb21tZW50IiwiYnV0dG9uWWVzU2V0dXAiLCJidXR0b25Ob1NldHVwIiwiYnV0dG9uU3VibWl0U2V0dXAiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwidHlwZSIsImVycm9yIiwicmVzcG9uc2UiLCJzdWNjZXNzIiwic2V0VGltZW91dCIsInR4dEZlZWRiYWNrIiwic2luZ2xlQ29udGVudFBhZ2UiLCJyZXNldFRpdGxlIiwiY2xvbmVUaXRsZSIsImNsb25lIiwicHJlcGVuZCIsInJlbGF0ZUNvbnRlbnQiLCJvcmlnaW5hbFJlbGF0ZWREaXYiLCJyZWxhdGVkVGl0bGUiLCJlbXB0eSIsImFwcGVuZCIsImh0bWwiLCJwcm9kdWN0TGFuZGluZyIsInNjcm9sbFRvQW5jaG9yIiwic2Nyb2xsSGVpZ2h0IiwiaGFzaEFuY2hvciIsIm9mZnNldCIsInRvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJkb2N1bWVudCIsInJlYWR5IiwibmF2Il0sIm1hcHBpbmdzIjoiQUFDQSxHQUFJQSxjQUFnQixXQUNoQixZQUNBLElBQUlDLEdBQ0FDLEVBQ0FGLEdBQ0FHLEtBQU0sV0FDRkYsRUFBYUcsRUFBRSxrQkFDZkYsRUFBZ0JFLEVBQUUsMEJBQ2RILEVBQVdJLE9BQVMsR0FBS0gsRUFBY0csT0FBUyxJQUNoREwsRUFBYU0sZ0JBQ2JOLEVBQWFPLGtCQUNiUCxFQUFhUSxnQkFDYlIsRUFBYVMsbUJBR3JCRixnQkFBaUIsV0FDYkwsRUFBY1EsTUFBTSxXQUNoQlQsRUFBV1UsU0FBUyxRQUNwQlAsRUFBRSxRQUFRTyxTQUFTLDBCQUczQkgsY0FBZSxXQUNYUCxFQUFXVyxLQUFLLGNBQWNGLE1BQU0sV0FDaENULEVBQVdZLFlBQVksUUFDdkJULEVBQUUsUUFBUVMsWUFBWSwwQkFHOUJKLGVBQWdCLFdBRVpSLEVBQVdXLEtBQUssb0JBQW9CRixNQUFNLFdBQ3RDSSxTQUFTQyxLQUFPWCxFQUFFWSxNQUFNQyxLQUFLLFVBR3JDWCxjQUFlLFdBQ1hGLEVBQUVjLEtBQUtqQixFQUFXVyxLQUFLLG9CQUFxQixTQUFTTyxFQUFPQyxHQUV4RCxHQUFJTixTQUFTQyxLQUFLTSxRQUFRakIsRUFBRVksTUFBTUMsS0FBSyxTQUFXLEVBRTlDLE1BREFmLEdBQWNvQixLQUFLbEIsRUFBRVksTUFBTU0sU0FDcEIsS0FLdkIsT0FBT3RCLE1BRVB1QixlQUFrQixXQUNsQixZQUNBLElBQUl0QixHQUNBQyxFQUNBcUIsR0FDQXBCLEtBQU0sV0FDRkYsRUFBYUcsRUFBRSxxQkFDZkYsRUFBZ0JFLEVBQUUsNkJBQ2RILEVBQVdJLE9BQVMsR0FBS0gsRUFBY0csT0FBUyxJQUNoRGtCLEVBQWVoQixrQkFDZmdCLEVBQWVmLGtCQUd2QkQsZ0JBQWlCLFdBQ2JMLEVBQWNRLE1BQU0sV0FDaEJULEVBQVdVLFNBQVMsUUFDcEJQLEVBQUUsUUFBUU8sU0FBUywwQkFHM0JILGNBQWUsV0FDWFAsRUFBV1csS0FBSyxjQUFjRixNQUFNLFdBQ2hDVCxFQUFXWSxZQUFZLFFBQ3ZCVCxFQUFFLFFBQVFTLFlBQVksMEJBSWxDLE9BQU9VLE1BRVBDLFlBQWUsV0FDZixZQUNBLElBQUlBLElBQ0FyQixLQUFNLFdBQ0ZxQixFQUFZQyxpQkFFaEJBLGNBQWUsV0FDWCxHQUFJQyxHQUFRdEIsRUFBRSx5QkFDVnVCLEVBQWN2QixFQUFFLDBCQUNoQnNCLEdBQU1yQixPQUFTLEdBQUtzQixFQUFZdEIsT0FBUyxHQUN6Q3NCLEVBQVlDLEdBQUcsUUFBUyxXQUNwQnhCLEVBQUVZLE1BQU1hLFlBQVksVUFDcEJILEVBQU1HLFlBQVksVUFDZHpCLEVBQUVZLE1BQU1jLFNBQVMsVUFDakIxQixFQUFFWSxNQUFNSixLQUFLLFFBQVFVLEtBQUtsQixFQUFFWSxNQUFNQyxLQUFLLGNBRXZDYixFQUFFWSxNQUFNSixLQUFLLFFBQVFVLEtBQUtsQixFQUFFWSxNQUFNQyxLQUFLLGlCQU0zRCxPQUFPTyxNQUVQTyxNQUFTLFdBQ1QsWUFDQSxJQUFJQyxHQUNBRCxHQUNBNUIsS0FBTSxXQUNFQyxFQUFFLGVBQWVDLE9BQVMsSUFDMUIwQixFQUFNRSxpQkFDTkYsRUFBTUcsMEJBQ05ILEVBQU1JLHlCQUNOSixFQUFNSyxnQkFDTkwsRUFBTU0sZ0JBQ05OLEVBQU1PLHFCQUNOUCxFQUFNUSxrQkFHZEEsY0FBZSxXQUVYbkMsRUFBRSxlQUFlb0MsV0FDYkMsU0FBVSxNQUNWQyxLQUFNLE9BQ05DLE9BQVEsR0FDUkMsVUFBVyxLQUduQlgsZUFBZ0IsV0FDWixHQUFJWSxHQUFhekMsRUFBRTBDLFFBQVFDLE9BRXZCZixHQURBYSxFQUFhRyxjQUFjQyx1QkFDWCxFQUNUSixHQUFjRyxjQUFjQyx3QkFBMEJKLEVBQWEsSUFDMUQsRUFFQSxHQUd4Qlgsd0JBQXlCLFdBQ3JCLEdBQUlnQixHQUFtQjlDLEVBQUUsd0JBQ3JCK0MsRUFBaUIvQyxFQUFFLGVBQ25CZ0QsRUFBaUJoRCxFQUFFLGtCQUFrQmlELElBQUksZUFDN0NGLEdBQWV0QyxZQUFZLGdCQUFnQkEsWUFBWSxnQkFBZ0JBLFlBQVksZ0JBQ25Gc0MsRUFBZXhDLFNBQVMsUUFBVXFCLEVBQWdCLFVBR2xEa0IsRUFBaUJyQyxZQUFZLFVBQzdCa0IsRUFBTXVCLHVCQUF1QmxELEVBQUVZLE9BQy9CWixFQUFFYyxLQUFLa0MsRUFBZ0IsU0FBU2pDLEVBQU9DLEdBRW5DaEIsRUFBRVksTUFBTUwsU0FBUyxVQUNiUSxFQUFRYSxHQUNSNUIsRUFBRVksTUFBTUgsWUFBWSxZQUd4QnVDLEVBQWUvQyxPQUFTMkIsRUFDeEJrQixFQUFpQnJDLFlBQVksWUFFN0JxQyxFQUFpQnZDLFNBQVMsYUFHbEN3Qix1QkFBd0IsV0FDaEJhLGNBQWNPLHFCQUNkeEIsRUFBTUUsaUJBQ05GLEVBQU1HLDRCQUdkb0IsdUJBQXdCLFNBQVNFLEdBQ3pCcEQsRUFBRW9ELEdBQVcxQixTQUFTLFVBQ3RCMUIsRUFBRW9ELEdBQVc1QyxLQUFLLFFBQVFVLEtBQUtsQixFQUFFb0QsR0FBV3ZDLEtBQUssY0FFakRiLEVBQUVvRCxHQUFXNUMsS0FBSyxRQUFRVSxLQUFLbEIsRUFBRW9ELEdBQVd2QyxLQUFLLGVBR3pEcUIsbUJBQW9CLFdBQ2hCbEMsRUFBRSx3QkFBd0JxRCxJQUFJLFNBQVM3QixHQUFHLFFBQVMsV0FDL0MsR0FBSXdCLEdBQWlCaEQsRUFBRSxrQkFBa0JpRCxJQUFJLGVBQzdDakQsR0FBRVksTUFBTWEsWUFBWSxVQUNwQkUsRUFBTXVCLHVCQUF1QmxELEVBQUVZLE9BQy9CWixFQUFFYyxLQUFLa0MsRUFBZ0IsU0FBU2pDLEVBQU9DLEdBRS9CRCxHQUFTYSxHQUNUNUIsRUFBRVksTUFBTWEsWUFBWSxZQUd4QnVCLEVBQWUvQyxPQUFTMkIsRUFDeEI1QixFQUFFWSxNQUFNSCxZQUFZLFlBRXBCVCxFQUFFWSxNQUFNTCxTQUFTLGVBSTdCMEIsY0FBZSxXQUNYakMsRUFBRSxlQUFlTSxNQUFNLFdBRW5CLEdBQUlnRCxHQUFVdEQsRUFBRSxlQUFlUSxLQUFLLHFCQUFxQitDLEtBQUssS0FDOUR2RCxHQUFFLFVBQVV1RCxLQUFLLE1BQU8sZ0NBQWtDRCxFQUFVLHFCQUNwRXRELEVBQUUsaUJBQWlCd0QsT0FDbkJ4RCxFQUFFWSxNQUFNTCxTQUFTLFVBQ2pCUCxFQUFFWSxNQUFNNkMsVUFHaEJ6QixjQUFlLFdBQ1gsR0FBSXNCLEdBQVUsRUFDZHRELEdBQUUsZUFBZVEsS0FBSyxNQUFNRixNQUFNLFdBQ3pCTixFQUFFWSxNQUFNYyxTQUFTLFVBQ2xCMUIsRUFBRSxXQUFXUyxZQUFZLFFBQ3pCVCxFQUFFWSxNQUFNTCxTQUFTLFFBQ2pCK0MsRUFBVXRELEVBQUVZLE1BQU0yQyxLQUFLLE1BQ3ZCdkQsRUFBRSxpQkFBaUJ3RCxPQUNuQnhELEVBQUUsZUFBZU8sU0FBUyxVQUMxQlAsRUFBRSxVQUFVdUQsS0FBSyxNQUFPLGdDQUFrQ0QsRUFBVSx5QkFLcEYsT0FBTzNCLE1BRVArQixjQUFpQixXQUNqQixZQUNBLElBQUlDLEdBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FoQixHQUNBM0QsS0FBTSxlQUU4QixNQURoQzRELEVBQW1CM0QsRUFBRSx3QkFFakI0RCxFQUFhRCxFQUFpQm5ELEtBQUssWUFDbkNxRCxFQUFZRixFQUFpQm5ELEtBQUssV0FDbENzRCxFQUFnQkgsRUFBaUJuRCxLQUFLLGVBQ3RDdUQsRUFBaUJKLEVBQWlCbkQsS0FBSyxtQkFDdkN3RCxFQUFpQkwsRUFBaUJuRCxLQUFLLG1CQUN2Q3lELEVBQWlCTixFQUFpQm5ELEtBQUssb0JBQ3ZDa0UsRUFBbUJmLEVBQWlCbkQsS0FBSyxnQkFDekMwRCxFQUFZUCxFQUFpQjlDLEtBQUssUUFDaEIsVUFBZHFELElBQ0FBLEVBQVksYUFFaEJDLEVBQVlSLEVBQWlCOUMsS0FBSyxNQUNsQ3VELEVBQVFULEVBQWlCOUMsS0FBSyxRQUM5QndELEVBQVVWLEVBQWlCOUMsS0FBSyxVQUNoQ3lELEVBQU9YLEVBQWlCOUMsS0FBSyxPQUM3QjBELEVBQVNaLEVBQWlCOUMsS0FBSyxTQUMvQjZDLEVBQWNpQixpQkFDZGpCLEVBQWNrQixnQkFDZGxCLEVBQWNtQixzQkFHdEJGLGVBQWdCLFdBQ1pmLEVBQVdwQyxHQUFHLFFBQVMsU0FBU3NELEdBQzVCQSxFQUFNQyxpQkFFTmhCLEVBQWV4RCxTQUFTLFNBRXhCaUUsR0FBUyxJQUNUQyxFQUFXLElBQU1MLEVBQVEsaURBQTRERixFQUFZLE9BQVNDLEVBQVksV0FBYUUsRUFBVSxTQUFXQyxFQUFPLFdBQWFDLEVBQVMsVUFBWUMsRUFBUyxRQUUxTXhFLEVBQUVnRixNQUNFQyxJQUFLUixFQUNMUyxTQUFVLE9BQ1ZDLEtBQU0sT0FDTkMsTUFBTyxTQUFTQyxHQUNacEIsRUFBZXhELFlBQVksV0FFL0I2RSxRQUFTLFNBQVNELEdBQ2RwQixFQUFleEQsWUFBWSxnQkFLM0NtRSxjQUFlLFdBQ1hmLEVBQVVyQyxHQUFHLFFBQVMsU0FBU3NELEdBQzNCQSxFQUFNQyxpQkFFTmhCLEVBQWV4RCxTQUFTLFVBQ3hCZ0YsV0FBVyxXQUNQdkIsRUFBZXZELFlBQVksV0FDNUIsUUFHWG9FLGtCQUFtQixXQUNmZixFQUFjdEMsR0FBRyxRQUFTLFNBQVNzRCxHQUMvQkEsRUFBTUMsZ0JBRU4sSUFBSVMsR0FBY2QsRUFBaUIxRCxLQUNuQyxJQUFJd0UsRUFBWXZGLE9BQVMsRUFBRyxDQUN4QitELEVBQWV6RCxTQUFTLFNBRXhCaUUsR0FBUyxJQUNUQyxFQUFXLElBQU1MLEVBQVEsbURBQTRERixFQUFZLE9BQVNDLEVBQVksV0FBYUUsRUFBVSxTQUFXQyxFQUFPLFdBQWFDLEVBQVMsVUFBWUMsRUFBUyxRQUFVZ0IsRUFFcE54RixFQUFFZ0YsTUFDRUMsSUFBS1IsRUFDTFMsU0FBVSxPQUNWQyxLQUFNLE9BQ05DLE1BQU8sU0FBU0MsR0FDWnBCLEVBQWV4RCxZQUFZLFdBRS9CNkUsUUFBUyxTQUFTRCxHQUNkcEIsRUFBZXhELFlBQVksaUJBT25ELE9BQU9pRCxNQUVQK0Isa0JBQXFCLFdBQ3JCLFlBV0EsUUFUSUMsV0FBWSxXQUNSLEdBQUkxRixFQUFFLHlCQUF5QkMsT0FBUyxHQUFLRCxFQUFFLGVBQWVDLE9BQVMsRUFBRyxDQUV0RSxHQUFJMEYsR0FBYTNGLEVBQUUsZ0JBQWdCNEYsUUFBUXJGLFNBQVMsY0FDcERQLEdBQUUsZ0JBQWdCeUQsT0FDbEJ6RCxFQUFFLGVBQWU2RixRQUFRRixHQUFZcEYsU0FBUyx5QkFNMUR1RixjQUFpQixXQUNqQixZQWVBLFFBYkkvRixLQUFNLFdBRUYsR0FBSWdHLEdBQXFCL0YsRUFBRSxZQUN2QmdHLEVBQWVoRyxFQUFFLGdCQUNNLFFBQXZCK0YsR0FBK0JBLEVBQW1COUYsT0FBUyxJQUMzREQsRUFBRSwyQkFBMkJpRyxRQUM3QmpHLEVBQUUsMkJBQTJCa0csT0FBT0gsRUFBbUJJLFFBQ3ZEbkcsRUFBRSwyQkFBMkJPLFNBQVMsUUFDdEN3RixFQUFtQkUsUUFDbkJqRyxFQUFFLDBCQUEwQlEsS0FBSyxVQUFVMkYsS0FBS0gsRUFBYUcsY0FNekVDLGVBQWtCLFdBQ2xCLFlBQ0EsSUFBSUEsSUFDQXJHLEtBQU0sV0FDRnFHLEVBQWVDLGtCQUVuQkEsZUFBZ0IsV0FDWixHQUNJQyxHQURBQyxFQUFhdkcsRUFBRVUsVUFBVTZDLEtBQUssT0FFZixNQUFmZ0QsSUFDQUQsRUFBZXRHLEVBQUV1RyxHQUFZQyxTQUFTQyxJQUFNLEdBQzVDekcsRUFBRSxhQUFhMEcsU0FDWEMsVUFBV0wsR0FDWixVQUlmLE9BQU9GLEtBRVhwRyxHQUFFNEcsVUFBVUMsTUFBTSxXQUNkLFlBQ0FULGdCQUFlckcsT0FDZitHLElBQUkvRyxPQUNKSCxhQUFhRyxPQUNib0IsZUFBZXBCLE9BQ2ZxQixZQUFZckIsT0FDWjJELGNBQWMzRCxPQUNkNEIsTUFBTTVCLE9BQ04wRixrQkFBa0JDLGFBQ2xCSSxjQUFjL0YiLCJmaWxlIjoicHJvZHVjdC1sYW5kaW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHNlYXJjaERhdGEsIG5hdiwgSGlzdG9yeSwgY29tbW9uU2V0dGluZyAqL1xudmFyIGNhcnJpZXJQb3B1cCA9IChmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIF9tYWluUG9wdXAsXG4gICAgICAgIF9mYWtlRHJvcGRvd247XG4gICAgdmFyIGNhcnJpZXJQb3B1cCA9IHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfbWFpblBvcHVwID0gJCgnLmNhcnJpZXItcG9wdXAnKTtcbiAgICAgICAgICAgIF9mYWtlRHJvcGRvd24gPSAkKCcuY2Fycmllci1mYWtlLWRyb3Bkb3duJyk7XG4gICAgICAgICAgICBpZiAoX21haW5Qb3B1cC5sZW5ndGggPiAwICYmIF9mYWtlRHJvcGRvd24ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNhcnJpZXJQb3B1cC5zZWxlY3REZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY2FycmllclBvcHVwLm9wZW5Qb3B1cFdpbmRvdygpO1xuICAgICAgICAgICAgICAgIGNhcnJpZXJQb3B1cC5jbG9zZUJ0bkNsaWNrKCk7XG4gICAgICAgICAgICAgICAgY2FycmllclBvcHVwLnBvcHVwTGlzdENsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9wZW5Qb3B1cFdpbmRvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfZmFrZURyb3Bkb3duLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9tYWluUG9wdXAuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3N1cHBvcnQtcG9wdXAtZml4ZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBjbG9zZUJ0bkNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9tYWluUG9wdXAuZmluZCgnLmJ0bi1jbG9zZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9tYWluUG9wdXAucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3N1cHBvcnQtcG9wdXAtZml4ZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBwb3B1cExpc3RDbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAnJztcbiAgICAgICAgICAgIF9tYWluUG9wdXAuZmluZCgnLnBvcHVwLWxpc3QgPiBsaScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAkKHRoaXMpLmRhdGEoJ3VybCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJC5lYWNoKF9tYWluUG9wdXAuZmluZCgnLnBvcHVwLWxpc3QgPiBsaScpLCBmdW5jdGlvbihpbmRleCwgdmFsKSB7XG4gICAgICAgICAgICAgICAgLyogaXRlcmF0ZSB0aHJvdWdoIGFycmF5IG9yIG9iamVjdCAqL1xuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5ocmVmLmluZGV4T2YoJCh0aGlzKS5kYXRhKCd1cmwnKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBfZmFrZURyb3Bkb3duLnRleHQoJCh0aGlzKS50ZXh0KCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBjYXJyaWVyUG9wdXA7XG59KCkpO1xudmFyIHVzZXJHdWlkZVBvcHVwID0gKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgX21haW5Qb3B1cCxcbiAgICAgICAgX2Zha2VEcm9wZG93bjtcbiAgICB2YXIgdXNlckd1aWRlUG9wdXAgPSB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX21haW5Qb3B1cCA9ICQoJy51c2VyLWd1aWRlLXBvcHVwJyk7XG4gICAgICAgICAgICBfZmFrZURyb3Bkb3duID0gJCgnLnVzZXItZ3VpZGUtZmFrZS1kcm9wZG93bicpO1xuICAgICAgICAgICAgaWYgKF9tYWluUG9wdXAubGVuZ3RoID4gMCAmJiBfZmFrZURyb3Bkb3duLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB1c2VyR3VpZGVQb3B1cC5vcGVuUG9wdXBXaW5kb3coKTtcbiAgICAgICAgICAgICAgICB1c2VyR3VpZGVQb3B1cC5jbG9zZUJ0bkNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9wZW5Qb3B1cFdpbmRvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfZmFrZURyb3Bkb3duLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9tYWluUG9wdXAuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3N1cHBvcnQtcG9wdXAtZml4ZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBjbG9zZUJ0bkNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9tYWluUG9wdXAuZmluZCgnLmJ0bi1jbG9zZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9tYWluUG9wdXAucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3N1cHBvcnQtcG9wdXAtZml4ZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gdXNlckd1aWRlUG9wdXA7XG59KCkpO1xudmFyIGFydGljbGVMaXN0ID0gKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgYXJ0aWNsZUxpc3QgPSB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXJ0aWNsZUxpc3Quc2hvd01vcmVDbGljaygpO1xuICAgICAgICB9LFxuICAgICAgICBzaG93TW9yZUNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBsaXN0cyA9ICQoJy5hcnRpY2xlLWFyZWEgYXJ0aWNsZScpLFxuICAgICAgICAgICAgICAgIHNob3dNb3JlQnRuID0gJCgnLmJ0bi1zaG93LW1vcmUtYXJ0aWNsZXMnKTtcbiAgICAgICAgICAgIGlmIChsaXN0cy5sZW5ndGggPiAwICYmIHNob3dNb3JlQnRuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzaG93TW9yZUJ0bi5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnc2hvd2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RzLnRvZ2dsZUNsYXNzKCdzaG93ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3Nob3dlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3NwYW4nKS50ZXh0KCQodGhpcykuZGF0YSgnc2hvdy1sZXNzJykpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdzcGFuJykudGV4dCgkKHRoaXMpLmRhdGEoJ3Nob3ctbW9yZScpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gYXJ0aWNsZUxpc3Q7XG59KCkpO1xudmFyIHZpZGVvID0gKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgX3Nob3dNYXhWaWRlbztcbiAgICB2YXIgdmlkZW8gPSB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQoJy52aWRlby1hcmVhJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZpZGVvLnJlc2V0TWF4VmlkZW9zKCk7XG4gICAgICAgICAgICAgICAgdmlkZW8udXBkYXRlRGlzcGxheVZpZGVvSXRlbXMoKTtcbiAgICAgICAgICAgICAgICB2aWRlby5zZXR1cERpc3BsYXlWaWRlb0l0ZW1zKCk7XG4gICAgICAgICAgICAgICAgdmlkZW8udmlkZW9MaXN0SW5pdCgpO1xuICAgICAgICAgICAgICAgIHZpZGVvLnZpZGVvTWFza0luaXQoKTtcbiAgICAgICAgICAgICAgICB2aWRlby5zaG93TW9yZVZpZGVvQ2xpY2soKTtcbiAgICAgICAgICAgICAgICB2aWRlby50cmltVmlkZW9OYW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRyaW1WaWRlb05hbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9yZXF1aXJlZCBqcXVlcnkuZG90ZG90ZG90Lm1pbi5qc1xuICAgICAgICAgICAgJCgnLnZpZGVvLW5hbWUnKS5kb3Rkb3Rkb3Qoe1xuICAgICAgICAgICAgICAgIGVsbGlwc2lzOiAnLi4uJyxcbiAgICAgICAgICAgICAgICB3cmFwOiAnd29yZCcsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MixcbiAgICAgICAgICAgICAgICB0b2xlcmFuY2U6IDhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZXNldE1heFZpZGVvczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgd2luZG93U2l6ZSA9ICQod2luZG93KS53aWR0aCgpO1xuICAgICAgICAgICAgaWYgKHdpbmRvd1NpemUgPiBjb21tb25TZXR0aW5nLm1vYmlsZU1heFJlc2VybHV0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICBfc2hvd01heFZpZGVvID0gNTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93U2l6ZSA8PSBjb21tb25TZXR0aW5nLm1vYmlsZU1heFJlc2VybHV0aW9uKCkgJiYgd2luZG93U2l6ZSA+IDQ4MCkge1xuICAgICAgICAgICAgICAgIF9zaG93TWF4VmlkZW8gPSAzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfc2hvd01heFZpZGVvID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlRGlzcGxheVZpZGVvSXRlbXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNob3dNb3JlVmlkZW9CdG4gPSAkKCcuYnRuLXNob3ctbW9yZS12aWRlbycpLFxuICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyID0gJCgnLnZpZGVvLWxpc3QnKSxcbiAgICAgICAgICAgICAgICB2aWRlb0xpc3RJdGVtcyA9ICQoJy52aWRlby1saXN0IGxpJykubm90KCcuYnVmZmVyLWl0ZW0nKTtcbiAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdzaG93LTItdmlkZW8nKS5yZW1vdmVDbGFzcygnc2hvdy0zLXZpZGVvJykucmVtb3ZlQ2xhc3MoJ3Nob3ctNS12aWRlbycpO1xuICAgICAgICAgICAgdmlkZW9Db250YWluZXIuYWRkQ2xhc3MoJ3Nob3ctJyArIF9zaG93TWF4VmlkZW8gKyAnLXZpZGVvJyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnX3Nob3dNYXhWaWRlbz0nICsgX3Nob3dNYXhWaWRlbyk7XG4gICAgICAgICAgICAvL1Jlc2V0XG4gICAgICAgICAgICBzaG93TW9yZVZpZGVvQnRuLnJlbW92ZUNsYXNzKCdzaG93ZWQnKTtcbiAgICAgICAgICAgIHZpZGVvLnJlc2V0U2hvd01vcmVWaWRlb1RleHQoJCh0aGlzKSk7XG4gICAgICAgICAgICAkLmVhY2godmlkZW9MaXN0SXRlbXMsIGZ1bmN0aW9uKGluZGV4LCB2YWwpIHtcbiAgICAgICAgICAgICAgICAvKiBpdGVyYXRlIHRocm91Z2ggYXJyYXkgb3Igb2JqZWN0ICovXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgX3Nob3dNYXhWaWRlbykge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh2aWRlb0xpc3RJdGVtcy5sZW5ndGggPiBfc2hvd01heFZpZGVvKSB7XG4gICAgICAgICAgICAgICAgc2hvd01vcmVWaWRlb0J0bi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hvd01vcmVWaWRlb0J0bi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0dXBEaXNwbGF5VmlkZW9JdGVtczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoY29tbW9uU2V0dGluZy5zd2l0Y2hSZXNvbHV0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICB2aWRlby5yZXNldE1heFZpZGVvcygpO1xuICAgICAgICAgICAgICAgIHZpZGVvLnVwZGF0ZURpc3BsYXlWaWRlb0l0ZW1zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc2V0U2hvd01vcmVWaWRlb1RleHQ6IGZ1bmN0aW9uKHRhcmdldE9iaikge1xuICAgICAgICAgICAgaWYgKCQodGFyZ2V0T2JqKS5oYXNDbGFzcygnc2hvd2VkJykpIHtcbiAgICAgICAgICAgICAgICAkKHRhcmdldE9iaikuZmluZCgnc3BhbicpLnRleHQoJCh0YXJnZXRPYmopLmRhdGEoJ3Nob3ctbGVzcycpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCh0YXJnZXRPYmopLmZpbmQoJ3NwYW4nKS50ZXh0KCQodGFyZ2V0T2JqKS5kYXRhKCdzaG93LW1vcmUnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNob3dNb3JlVmlkZW9DbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcuYnRuLXNob3ctbW9yZS12aWRlbycpLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlkZW9MaXN0SXRlbXMgPSAkKCcudmlkZW8tbGlzdCBsaScpLm5vdCgnLmJ1ZmZlci1pdGVtJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnc2hvd2VkJyk7XG4gICAgICAgICAgICAgICAgdmlkZW8ucmVzZXRTaG93TW9yZVZpZGVvVGV4dCgkKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAkLmVhY2godmlkZW9MaXN0SXRlbXMsIGZ1bmN0aW9uKGluZGV4LCB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogaXRlcmF0ZSB0aHJvdWdoIGFycmF5IG9yIG9iamVjdCAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gX3Nob3dNYXhWaWRlbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodmlkZW9MaXN0SXRlbXMubGVuZ3RoID4gX3Nob3dNYXhWaWRlbykge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHZpZGVvTWFza0luaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLnZpZGVvLW1hc2snKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBkZWF1bHQ6IHRoZSBmaXJzdCB2aWRlbyBpcyByZWFkeSB0byBwbGF5XG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvSWQgPSAkKCcudmlkZW8tbGlzdCcpLmZpbmQoJ2xpOm50aC1vZi10eXBlKDEpJykuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICAkKCdpZnJhbWUnKS5hdHRyKCdzcmMnLCAnaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nICsgdmlkZW9JZCArICc/cmVsPTAmYXV0b3BsYXk9MScpO1xuICAgICAgICAgICAgICAgICQoJy52aWRlby1pZnJhbWUnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdmlkZW9MaXN0SW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmlkZW9JZCA9ICcnO1xuICAgICAgICAgICAgJCgnLnZpZGVvLWxpc3QnKS5maW5kKCdsaScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygncGxheScpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJ2xpLnBsYXknKS5yZW1vdmVDbGFzcygncGxheScpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdwbGF5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvSWQgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy52aWRlby1pZnJhbWUnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy52aWRlby1tYXNrJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAkKCdpZnJhbWUnKS5hdHRyKCdzcmMnLCAnaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nICsgdmlkZW9JZCArICc/cmVsPTAmYXV0b3BsYXk9MScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gdmlkZW87XG59KCkpO1xudmFyIHJhdGluZ0FydGljbGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBfcmF0aW5nQ29udGFpbmVyLFxuICAgICAgICBfYnV0dG9uWWVzLFxuICAgICAgICBfYnV0dG9uTm8sXG4gICAgICAgIF9idXR0b25TdWJtaXQsXG4gICAgICAgIF9ibG9ja1F1ZXN0aW9uLFxuICAgICAgICBfYmxvY2tGZWVkYmFjayxcbiAgICAgICAgX2Jsb2NrVGhhbmt5b3UsXG4gICAgICAgIF9wYWdldHlwZSxcbiAgICAgICAgX3RhcmdldGlkLFxuICAgICAgICBfc2l0ZSxcbiAgICAgICAgX3NpdGVpZCxcbiAgICAgICAgX3BpZCxcbiAgICAgICAgX3BuYW1lLFxuICAgICAgICBfdmFsdWUsXG4gICAgICAgIF9zbG90dXJsLFxuICAgICAgICBfdGV4dGFyZWFDb21tZW50O1xuICAgIHZhciByYXRpbmdBcnRpY2xlID0ge1xuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9yYXRpbmdDb250YWluZXIgPSAkKCcucmF0aW5nLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfcmF0aW5nQ29udGFpbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIF9idXR0b25ZZXMgPSBfcmF0aW5nQ29udGFpbmVyLmZpbmQoJy5idG4teWVzJyk7XG4gICAgICAgICAgICAgICAgX2J1dHRvbk5vID0gX3JhdGluZ0NvbnRhaW5lci5maW5kKCcuYnRuLW5vJyk7XG4gICAgICAgICAgICAgICAgX2J1dHRvblN1Ym1pdCA9IF9yYXRpbmdDb250YWluZXIuZmluZCgnLmJ0bi1zdWJtaXQnKTtcbiAgICAgICAgICAgICAgICBfYmxvY2tRdWVzdGlvbiA9IF9yYXRpbmdDb250YWluZXIuZmluZCgnLnF1ZXN0aW9uLWJsb2NrJyk7XG4gICAgICAgICAgICAgICAgX2Jsb2NrRmVlZGJhY2sgPSBfcmF0aW5nQ29udGFpbmVyLmZpbmQoJy5mZWVkYmFjay1ibG9jaycpO1xuICAgICAgICAgICAgICAgIF9ibG9ja1RoYW5reW91ID0gX3JhdGluZ0NvbnRhaW5lci5maW5kKCcudGhhbmsteW91LWJsb2NrJyk7XG4gICAgICAgICAgICAgICAgX3RleHRhcmVhQ29tbWVudCA9IF9yYXRpbmdDb250YWluZXIuZmluZCgnLnR4dC1jb21tZW50Jyk7XG4gICAgICAgICAgICAgICAgX3BhZ2V0eXBlID0gX3JhdGluZ0NvbnRhaW5lci5kYXRhKCd0eXBlJyk7XG4gICAgICAgICAgICAgICAgaWYgKF9wYWdldHlwZSA9PT0gJ2hvd3RvJykge1xuICAgICAgICAgICAgICAgICAgICBfcGFnZXR5cGUgPSBcImRpdGFob3d0b1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGFyZ2V0aWQgPSBfcmF0aW5nQ29udGFpbmVyLmRhdGEoJ2lkJyk7XG4gICAgICAgICAgICAgICAgX3NpdGUgPSBfcmF0aW5nQ29udGFpbmVyLmRhdGEoJ3NpdGUnKTtcbiAgICAgICAgICAgICAgICBfc2l0ZWlkID0gX3JhdGluZ0NvbnRhaW5lci5kYXRhKCdzaXRlaWQnKTtcbiAgICAgICAgICAgICAgICBfcGlkID0gX3JhdGluZ0NvbnRhaW5lci5kYXRhKCdwaWQnKTtcbiAgICAgICAgICAgICAgICBfcG5hbWUgPSBfcmF0aW5nQ29udGFpbmVyLmRhdGEoJ3BuYW1lJyk7XG4gICAgICAgICAgICAgICAgcmF0aW5nQXJ0aWNsZS5idXR0b25ZZXNTZXR1cCgpO1xuICAgICAgICAgICAgICAgIHJhdGluZ0FydGljbGUuYnV0dG9uTm9TZXR1cCgpO1xuICAgICAgICAgICAgICAgIHJhdGluZ0FydGljbGUuYnV0dG9uU3VibWl0U2V0dXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYnV0dG9uWWVzU2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX2J1dHRvblllcy5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgLyogQWN0IG9uIHRoZSBldmVudCAqL1xuICAgICAgICAgICAgICAgIF9ibG9ja1F1ZXN0aW9uLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICB2YXIgYWN0ID0gJ3VwJztcbiAgICAgICAgICAgICAgICBfdmFsdWUgPSBcIjFcIjtcbiAgICAgICAgICAgICAgICBfc2xvdHVybCA9ICcvJyArIF9zaXRlICsgJy9zdXBwb3J0L1N1cHBvcnRWaWV3Q291bnRBZGQuYXNweD9hY3Q9JyArIGFjdCArICcmdHlwZT0nICsgX3BhZ2V0eXBlICsgJyZpZD0nICsgX3RhcmdldGlkICsgJyZzaXRlaWQ9JyArIF9zaXRlaWQgKyAnJnBfaWQ9JyArIF9waWQgKyAnJnBfbmFtZT0nICsgX3BuYW1lICsgJyZ2YWx1ZT0nICsgX3ZhbHVlICsgJyZjbXQ9JztcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKF9zbG90dXJsKTtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IF9zbG90dXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2Jsb2NrVGhhbmt5b3UucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2Jsb2NrVGhhbmt5b3UucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYnV0dG9uTm9TZXR1cDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfYnV0dG9uTm8ub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIC8qIEFjdCBvbiB0aGUgZXZlbnQgKi9cbiAgICAgICAgICAgICAgICBfYmxvY2tRdWVzdGlvbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX2Jsb2NrRmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgIH0sIDYwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYnV0dG9uU3VibWl0U2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX2J1dHRvblN1Ym1pdC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgLyogQWN0IG9uIHRoZSBldmVudCAqL1xuICAgICAgICAgICAgICAgIHZhciB0eHRGZWVkYmFjayA9IF90ZXh0YXJlYUNvbW1lbnQudmFsKCk7XG4gICAgICAgICAgICAgICAgaWYgKHR4dEZlZWRiYWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgX2Jsb2NrRmVlZGJhY2suYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0ID0gJ2Rvd24nO1xuICAgICAgICAgICAgICAgICAgICBfdmFsdWUgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICAgICAgX3Nsb3R1cmwgPSAnLycgKyBfc2l0ZSArICcvc3VwcG9ydC9TdXBwb3J0Vmlld0NvdW50QWRkLmFzcHg/YWN0PScgKyBhY3QgKyAnJnR5cGU9JyArIF9wYWdldHlwZSArICcmaWQ9JyArIF90YXJnZXRpZCArICcmc2l0ZWlkPScgKyBfc2l0ZWlkICsgJyZwX2lkPScgKyBfcGlkICsgJyZwX25hbWU9JyArIF9wbmFtZSArICcmdmFsdWU9JyArIF92YWx1ZSArICcmY210PScgKyB0eHRGZWVkYmFjaztcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhfc2xvdHVybCk7XG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IF9zbG90dXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ibG9ja1RoYW5reW91LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ibG9ja1RoYW5reW91LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiByYXRpbmdBcnRpY2xlO1xufSgpKTtcbnZhciBzaW5nbGVDb250ZW50UGFnZSA9IChmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHNpbmdsZUNvbnRlbnRQYWdlID0ge1xuICAgICAgICByZXNldFRpdGxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKCcucHJvZHVjdC1jb250ZW50LXBhZ2UnKS5sZW5ndGggPiAwICYmICQoJy52aWRlby1hcmVhJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vaGlkZSB0aXRsZSBpbiBnY21fY29udGVudFxuICAgICAgICAgICAgICAgIHZhciBjbG9uZVRpdGxlID0gJCgnLnRvcGljdGl0bGUxJykuY2xvbmUoKS5hZGRDbGFzcygnYXBwZW5kVGl0bGUnKTtcbiAgICAgICAgICAgICAgICAkKCcudG9waWN0aXRsZTEnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLnZpZGVvLWFyZWEnKS5wcmVwZW5kKGNsb25lVGl0bGUpLmFkZENsYXNzKCdhcHBlbmRUb0NvbnRlbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHNpbmdsZUNvbnRlbnRQYWdlO1xufSgpKTtcbnZhciByZWxhdGVDb250ZW50ID0gKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgcmVsYXRlQ29udGVudCA9IHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvL0FkZCByZWxhdGVkIGFydGljbGVcbiAgICAgICAgICAgIHZhciBvcmlnaW5hbFJlbGF0ZWREaXYgPSAkKCcucmVsaW5mbycpO1xuICAgICAgICAgICAgdmFyIHJlbGF0ZWRUaXRsZSA9ICQoJy5yZWxhdGVkVGl0bGUnKTtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbFJlbGF0ZWREaXYgIT09IG51bGwgJiYgb3JpZ2luYWxSZWxhdGVkRGl2Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKCcucmVsYXRlZC1ob3d0b3Mtd3JhcHBlcicpLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgJCgnLnJlbGF0ZWQtaG93dG9zLXdyYXBwZXInKS5hcHBlbmQob3JpZ2luYWxSZWxhdGVkRGl2Lmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgJCgnLnJlbGF0ZWQtaG93dG9zLXdyYXBwZXInKS5hZGRDbGFzcygnc2hvdycpO1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsUmVsYXRlZERpdi5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICQoXCIucmVsYXRlZC1saW5rcy13cmFwcGVyXCIpLmZpbmQoXCJzdHJvbmdcIikuaHRtbChyZWxhdGVkVGl0bGUuaHRtbCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHJlbGF0ZUNvbnRlbnQ7XG59KCkpO1xudmFyIHByb2R1Y3RMYW5kaW5nID0gKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgcHJvZHVjdExhbmRpbmcgPSB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcHJvZHVjdExhbmRpbmcuc2Nyb2xsVG9BbmNob3IoKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2Nyb2xsVG9BbmNob3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhhc2hBbmNob3IgPSAkKGxvY2F0aW9uKS5hdHRyKCdoYXNoJyksXG4gICAgICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgaWYgKGhhc2hBbmNob3IgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gJChoYXNoQW5jaG9yKS5vZmZzZXQoKS50b3AgLSA3MDtcbiAgICAgICAgICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxIZWlnaHRcbiAgICAgICAgICAgICAgICB9LCAnc2xvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gcHJvZHVjdExhbmRpbmc7XG59KCkpO1xuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHByb2R1Y3RMYW5kaW5nLmluaXQoKTtcbiAgICBuYXYuaW5pdCgpO1xuICAgIGNhcnJpZXJQb3B1cC5pbml0KCk7XG4gICAgdXNlckd1aWRlUG9wdXAuaW5pdCgpO1xuICAgIGFydGljbGVMaXN0LmluaXQoKTtcbiAgICByYXRpbmdBcnRpY2xlLmluaXQoKTtcbiAgICB2aWRlby5pbml0KCk7XG4gICAgc2luZ2xlQ29udGVudFBhZ2UucmVzZXRUaXRsZSgpO1xuICAgIHJlbGF0ZUNvbnRlbnQuaW5pdCgpO1xufSk7Il19
