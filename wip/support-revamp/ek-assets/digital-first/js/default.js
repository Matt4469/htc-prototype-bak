var subPromo=function(){"use strict";var t={init:function(){t.itemClick()},itemClick:function(){var t=$(".subpromo .promo-item");t.length>0&&t.on("click",function(){var t=$(this).find("a").attr("href");location.href=t})}};return t}(),topicList=function(){"use strict";var t={init:function(){t.topicClick()},topicClick:function(){$(".topic-item").click(function(){$(this).hasClass("selected")||($(".topic-item").removeClass("selectes"),$(this).addClass("selected"))})}};return t}(),productList=function(){"use strict";var t,e,i={clsNameContainer:".listing-detailed-container"},o={init:function(){},itemsInRow:function(){var t=0;return $(".product-item").each(function(){if($(this).prev().length>0){if($(this).position().top!==$(this).prev().position().top)return!1;t++}else t++}),t},appendAfterItem:function(t){for(var e=o.itemsInRow(),i=1,n=e;n<$(".product-item").length;n+=e){if(t<n)return n-1;i+=1}},removeDetailItem:function(t){$(".detail-item").removeClass("active"),commonSetting.removeMobilePopupFix(),setTimeout(function(){$(".product-item").removeClass("selected"),$(".detail-item").remove(),t()},500)},removePopupItem:function(){$(".carrier-popup").removeClass("show"),$("body").removeClass("support-popup-fixed")},scrollToSubItem:function(t){var e=$(".flex-box-area").find(".detail-item"),o=new TimelineLite({immediateRender:!1}),n=$(i.clsNameContainer).offset().top-70;$("html, body").animate({scrollTop:n},500),o.add(TweenLite.set(e,{height:"auto"})),o.add(TweenLite.from(e,.5,{height:t}),"-=0.49"),o.call(function(){e.addClass("active")},[],this,"-=0.49"),o.play()},collapseCarrier:function(){var t=$(".flex-box-area").find(".detail-item"),e=new TimelineLite;e.add(TweenLite.to(t,.5,{height:0}),"+=0.4"),e.call(function(){t.removeClass("active")},[],this),e.play()},expandList:function(t){var e=$(".detail-item"),i=0;commonSetting.isMobile()||$(".flex-box-area").removeClass("add-padding"),e.length>0?(i=e.height(),e.css("height","auto").removeClass("active").html("")):e=$('<div class="detail-item"></div>'),$(".product-item").each(function(t,n){if($(this).hasClass("selected")){var a=t,r=o.appendAfterItem(a),c='<div class="related-product-group popup-window"><div class="btn-close"></div><div class="popup-title m-popup-title">'+$(".hidden-select-product-model").val()+"</div>"+$(this).find(".related-products").html()+"</div>";void 0===r?e.append(c).insertAfter($(".product-item").last()):e.append(c).insertAfter($(".product-item").eq(r)),commonSetting.isMobile()?(e.addClass("active"),commonSetting.addMobilePopupFix()):o.scrollToSubItem(i),o.closeBtnClick(),o.productClick()}})},familyClick:function(){$(".product-item").click(function(i){var n=$(this).data("url");void 0!==n&&n.length>0?location.href=n:$(this).hasClass("selected")||(e.val(""),t.val($(this).index()),o.pushParams())})},restoreFamilySelection:function(){$(".product-item").removeClass("selected"),$(".product-item").eq(t.val()).addClass("selected"),o.expandList(!0)},productClick:function(){$(".product-list-container .related-product-item").off("click").on("click",function(t){if(t.preventDefault(),$(this).find(".hidden-carrier-block").length>0)e.val($(this).index()),o.pushParams();else{var i;i=commonSetting.isPrototypeHost()?"product-landing.htm?pname_id="+$(this).data("pname-id"):$(this).attr("href"),location.href=i}})},restoreProductSelection:function(){var t=$(".detail-item .related-product-item").eq(e.val()).find(".hidden-carrier-block").html();$(".carrier-popup").find(".popup-list").html(t),o.openPopupWindow(),o.closePopupWindowClick()},openPopupWindow:function(){$(".carrier-popup").addClass("show"),o.carrierPopupListClick(),$("body").addClass("support-popup-fixed")},closePopupWindowClick:function(){$(".carrier-popup").find(".btn-close").click(function(){e.val(""),commonSetting.isMobile()&&t.val(""),o.pushParams()})},carrierPopupListClick:function(){$(".carrier-popup").find(".popup-list > li").click(function(){location.href=$(this).data("url")})},closeBtnClick:function(){$(".detail-item").find(".btn-close").click(function(){o.collapseCarrier(),e.val(""),t.val(""),o.pushParams()})},initObj:function(){t=$(".hidden-seleted-family"),e=$(".hidden-seleted-product")},updateHiddenInput:function(i){var n=$.url(),a=n.param("family"),r=n.param("product");o.initObj(),t.val(""),e.val(""),void 0!==a&&(t.val(a),void 0!==r&&e.val(r)),i()},pushParams:function(){var i=t.val(),o=e.val(),n="";void 0!==i&&i.length>0&&(n+="&family="+i),void 0!==o&&o.length>0&&(n+="&product="+o),History.pushState({rand:Math.random(),family:i,product:o},document.title,"?"+n)},restorePageStatus:function(){o.familyClick(),""!==t.val()?(o.restoreFamilySelection(),""!==e.val()&&o.restoreProductSelection()):commonSetting.isMobile()||$(".flex-box-area").addClass("add-padding")},setupClickStatus:function(){o.familyClick(),""!==e.val()?o.restoreProductSelection():(o.removePopupItem(),""!==t.val()?o.restoreFamilySelection():o.removeDetailItem(function(){commonSetting.isMobile()||$(".flex-box-area").addClass("add-padding")}))}};return o}();$(document).ready(function(){"use strict";topicList.init(),subPromo.init()}),$(window).resize(function(t){"use strict";commonSetting.forcePageReload()}),function(t,e){"use strict";"file:"===document.location.protocol&&alert("The HTML5 History API (and thus History.js) do not work on files, please upload it to a server."),productList.updateHiddenInput(function(){productList.restorePageStatus()}),History.Adapter.bind(t,"statechange",function(){History.getState();productList.updateHiddenInput(function(){productList.setupClickStatus()})})}(window);