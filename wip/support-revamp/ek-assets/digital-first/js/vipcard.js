function addValidateRule(){"use strict";$("[id*=txt_sNAME]").rules("add",{required:!0}),$("[id*=txt_sNAME]").rules("add",{specialchars:!0}),$("[id*=txt_sPhoneNum]").rules("add",{required:!0}),$("[id*=txt_sPhoneNum]").rules("add",{numberonly:!0}),$("[id*=txt_sEamil]").rules("add",{required:!0}),$("[id*=txt_sEamil]").rules("add",{emailformat:!0}),$("[id*=txt_Address]").rules("add",{required:!0}),$("[id*=txt_Address]").rules("add",{specialcharsaddress:!0}),$("[id*=txt_sDesx]").rules("add",{required:!0})}function ReflashValidateImage(){"use strict";ajaxGetVCode()}function ajaxGetVCode(){"use strict";$.ajax({url:"/cn/support/captcahimg.aspx?act=ref&res=v",dataType:"html",type:"POST",error:function(){},success:function(e){vcode=e,$("#ctl00_ContentPlaceHolder1_Image1").attr("src","/cn/support/captcahimg.aspx")}})}function popupMsg(e){"use strict";$.confirm({title:"",message:e,buttons:{OK:{class:"blue-button",text:"OK"}}})}function popupMsgReload(e){"use strict";$.confirm({title:"",message:e,buttons:{OK:{class:"blue-button",text:"OK",action:function(){location.href=location.href}}}})}function popupAlertMsg(e,t){"use strict";$.confirm({title:e,message:t,buttons:{OK:{class:"blue-button",text:"OK"}}})}function popupLoading(){"use strict";$.confirm({title:"",message:"<img src='/ek-assets/responsive/img/ajax-loader.gif' style='display: block;margin-left: auto;margin-right: auto;' /><br>资料传送中......"})}function CheckInput(){"use strict";var e=document.getElementById("ctl00_ContentPlaceHolder1_txt_sDesx").innerHTML;document.getElementById("ctl00_ContentPlaceHolder1_txt_sDesx").innerHTML=e.replace(/<[^>].*?>/g,"")}function ajaxVipCheck(e){"use strict";$(".validate-card-submit").css({display:"none"}),$(".loading-spin.vip-check").css({display:"inline-block"}),$.ajax({url:e,dataType:"html",type:"POST",error:function(){new ErrorVipChecking,$(".validate-card-submit").css({display:"inline-block"}),$(".loading-spin.vip-check").hide()},success:function(e){var t=e,a=t.split(",");if("Error"===t)new ErrorVipChecking,$(".validate-card-submit").css({display:"inline-block"}),$(".loading-spin.vip-check").hide();else if("0"===a[0])popupAlertMsg("验证失败","您的卡号验证失败，如需服务请洽<a href='http://www.htc.com/cn/contact/email/'>客服人员</a> "),$(".validate-card-submit").css({display:"inline-block"}),$(".loading-spin.vip-check").hide();else{if("0"===a[1]?($(".checkbox").hide(),$(".needactivate").show()):($(".checkbox").show(),$(".needactivate").hide()),$("#ctl00_ContentPlaceHolder1_txtVipCardNumber").attr("readonly","readonly"),$("#ctl00_ContentPlaceHolder1_txt_IMEI_SN").attr("readonly","readonly"),$("#ctl00_ContentPlaceHolder1_VCode").attr("readonly","readonly"),"home"===$("#ServiceType").val())"H"===a[2]?(popupAlertMsg("验证失败","亲，乐享版不适应于快递上门取送机服务哦^_^，请选择<br/>到店维修"),$(".validate-card-submit").css({display:"inline-block"}),$(".loading-spin.vip-check").hide()):($(".appointment-btn.get-phone").hide(),$(".four-steps-address").show(),region_init("select_province","select_city","select_area"),$("#addressprovince").val($("#select_province :selected").text()),$("#addresscity").val($("#select_city :selected").text()),$("#addressdistrict").val($("#select_area :selected").text()),$("#select_province").change(function(){$("#addressprovince").val($("#select_province :selected").text())}),$("#select_city").change(function(){$("#addresscity").val($("#select_city :selected").text())}),$("#select_area").change(function(){$("#addressdistrict").val($("#select_area :selected").text())}),$(".steps-enter-user-info").show(100,function(){var e=$(this);$("html, body").animate({scrollTop:e.offset().top-$(".d-header").height()},300)}),popupAlertMsg("验证成功","请继续填入您的收件资料"));else{$(".appointment-btn.in-home").hide(),$(".four-steps-address").hide(),popupAlertMsg("验证成功","请选择离您最近的网点");var i=$("#ctl00_ContentPlaceHolder1_sCity").find("option:selected").text();$("#shoparea").show();var n=0;$(".shoplist").each(function(){$(this).attr("id")===i?(0===n&&($(".shoplist").removeClass("selected"),$(this).children("label").children("input").prop("checked",!0),$(this).addClass("selected")),$(this).addClass("show"),$(this).children("label").children(".eng-title").html(new GetABC(n)),n+=1):$(this).removeClass("show")}),$("#map").show(),new BuildMap,$(".steps-select-store-info").show(100,function(){var e=$(this);$("html, body").animate({scrollTop:e.offset().top-$(".d-header").height()},300)})}$(".loading-spin.vip-check").hide(),addValidateRule()}}})}function ErrorVipChecking(){"use strict";popupAlertMsg("验证错误","目前VIP验证机制暂时无法使用，我们正在全力修復中请，如需紧急服务请洽<a href='http://www.htc.com/cn/contact/email/'>客服人员</a> ")}function Submit(){"use strict";__doPostBack("ctl00_ContentPlaceHolder1_lb_submit","")}function disableLink(e){"use strict";return e.preventDefault(),!1}function GetABC(e){"use strict";return["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"][e]}function BuildMap(){"use strict";var e=$("input[name=rdShop]:checked").val();$("#shopid").val(e);var t=$("#shop"+e).text().replace(" - ","#"),a=(t.split("#"),$("#shop"+e).children("div .location-title").html()),i=$("#shop"+e).children("div .location-text").html(),n=new BMap.Map("map");n.reset();var s={type:BMAP_NAVIGATION_CONTROL_LARGE};n.addControl(new BMap.NavigationControl(s)),(new BMap.Geocoder).getPoint(i,function(e){if(e){n.centerAndZoom(e,16);var t=new BMap.Marker(e);n.addOverlay(t);var i=new BMap.Label(a,{offset:new BMap.Size(-17,-40)});t.setLabel(i)}},"")}var vcode="";$("#ServiceType").val("home"),$("#ctl00_ContentPlaceHolder1_lb_submit").click(function(){"use strict";$("#addressprovince").val($("#select_province :selected").text()),$("#addresscity").val($("#select_city :selected").text()),$("#addressdistrict").val($("#select_area :selected").text())});var vipCardService=function(){"use strict";var e={init:function(){e.setupAppointmentButton(),e.setupGetPhoneButton(),e.setupVcodeFunction(),e.setupVoiceVcodeFunction(),e.initCardValidate(),e.setupCardSubmit(),e.setupDataSubmit(),new ReflashValidateImage},setupAppointmentButton:function(){$(".appointment-btn.in-home").on("click",function(e){e.preventDefault(),$("#ServiceType").val("home"),$(".steps-vip-card-info").show(100,function(){var e=$(this);$("html, body").animate({scrollTop:e.offset().top-$(".d-header").height()},300)})})},setupGetPhoneButton:function(){$(".appointment-btn.get-phone").on("click",function(e){e.preventDefault(),$("#ServiceType").val("store"),$(".steps-vip-card-info").show(100,function(){var e=$(this);$("html, body").animate({scrollTop:e.offset().top-$(".d-header").height()},300)})}),$("#ctl00_ContentPlaceHolder1_dlAllCity option").each(function(){$(this).val().indexOf("[44]")>=0&&$("<option />",{val:this.value,text:this.text}).appendTo($("#ctl00_ContentPlaceHolder1_sCity"))}),$("#ctl00_ContentPlaceHolder1_sCity").change(function(){if("--"!==$(this).val()){$("#shoparea").show(),$("input[name=rdShop]:checked").prop("checked",!1);var e=$(this).find("option:selected").text(),t=0;$(".shoplist").each(function(){$(this).attr("id")===e?(0===t&&($(this).children("label").children("input").prop("checked",!0),$(".shoplist").removeClass("selected"),$(this).addClass("selected")),$(this).children("label").children(".eng-title").html(new GetABC(t)),$(this).addClass("show"),t+=1):$(this).removeClass("show")}),$("#map").show(),new BuildMap}}),$(".shoplist").click(function(e){e.preventDefault(),$(".shoplist").removeClass("selected"),$(this).addClass("selected"),$(this).children("label").children("input[type=radio]").attr("checked","checked"),$("#map").show(),new BuildMap}),$("#btnNextInputData").click(function(e){e.preventDefault(),$(".steps-enter-user-info").show(100,function(){var e=$(this);$("html, body").animate({scrollTop:e.offset().top-$(".d-header").height()},300)})})},setupVcodeFunction:function(){$.ajax({url:"/cn/support/captcahimg.aspx?act=ref&res=v",dataType:"html",type:"POST",error:function(){},success:function(e){vcode=e,$("#ctl00_ContentPlaceHolder1_Image1").attr("src","/cn/support/captcahimg.aspx?"+Math.random())}}),$("#reloadicon").on("click",function(){$.ajax({url:"/cn/support/captcahimg.aspx?act=ref&res=v",dataType:"html",type:"POST",error:function(){},success:function(e){vcode=e,$("#ctl00_ContentPlaceHolder1_Image1").attr("src","/cn/support/captcahimg.aspx?"+Math.random())}})})},setupVoiceVcodeFunction:function(){$("#speaker").on("click",function(){$("#voicecaptcha").attr("src","/cn/support/captcahvoice.aspx?vcode="+vcode);var e=$("#voicecaptcha")[0];return e.load(),e.play(),!1}),$("#voicecaptcha").bind("play",function(){$(".speaker-icon-area").hide(),$(".loading-spin.captcha-play").css({display:"inline-block"})}),$("#voicecaptcha").bind("ended",function(){$(".loading-spin.captcha-play").hide(),$(".speaker-icon-area").show()})},setupDescCheck:function(){$("#ctl00_ContentPlaceHolder1_txt_sDesx").maxlength({maxCharacters:1e3,statusText:"剩餘字元",slider:!0})},setupCardSubmit:function(){$(".validate-card-submit").on("click",function(e){if(e.preventDefault(),!1===$("#aspnetForm").valid())return!1;var t=$("#ctl00_ContentPlaceHolder1_txt_IMEI_SN").val(),a="",i="";t.length>12?a=t:i=t,ajaxVipCheck("/cn/support/vipreservationws.aspx?imei="+a+"&sn="+i+"&card="+$("#ctl00_ContentPlaceHolder1_txtVipCardNumber").val())})},setupDataSubmit:function(){$("#ctl00_ContentPlaceHolder1_lb_submit").on("click",function(e){if(e.preventDefault(),!1===$("#aspnetForm").valid())return!1;$("#ctl00_ContentPlaceHolder1_lb_submit").removeClass("button"),$("#ctl00_ContentPlaceHolder1_lb_submit").bind("click",disableLink),$("#ctl00_ContentPlaceHolder1_lb_submit").addClass("button_gray"),popupLoading(),__doPostBack("ctl00$ContentPlaceHolder1$lb_submit","")})},initCardValidate:function(){$.validator.addMethod("vcodevalidate",function(e,t){return t.value.toLowerCase()===vcode.toLowerCase()}),$.validator.addMethod("vipcard",function(e,t){return!!/^(?:[A-Za-z0-9]{11})$/.test(e)}),jQuery.validator.addMethod("emailformat",function(e,t){if(this.optional(t))return!0;for(var a=e.split(/[;,]+/),i=!0,n=0;n<a.length;n++){var s=a[n];i=i&&jQuery.validator.methods.email.call(this,$.trim(s),t)}return i},jQuery.validator.messages.multiemails),$.validator.addMethod("specialchars",function(e,t){return!/[`~!@#$%^&*\(\)-\+=\^\[\]\{\}"?\/:;,]+/.test(e)}),$.validator.addMethod("specialcharsaddress",function(e,t){return!/[`~!@#$%^&*\+=\^\[\]\{\}"?\/:;]+/.test(e)}),$.validator.addMethod("imei",function(e,t){return!!/^(?:[0-9]{14}|[0-9]{15}|[A-Za-z0-9]{12}|)$/.test(e)}),$.validator.addMethod("numberonly",function(e,t){return!!/^(\s*|[0-9\-#()+])+$/.test(e)}),$("#aspnetForm").validate({errorClass:"error up"})}};return e}();$(document).ready(function(){"use strict";vipCardService.init(),region_init("select_province","select_city","select_area")}),$(window).resize(function(){});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpcGNhcmQuanMiXSwibmFtZXMiOlsiYWRkVmFsaWRhdGVSdWxlIiwiJCIsInJ1bGVzIiwicmVxdWlyZWQiLCJzcGVjaWFsY2hhcnMiLCJudW1iZXJvbmx5IiwiZW1haWxmb3JtYXQiLCJzcGVjaWFsY2hhcnNhZGRyZXNzIiwiUmVmbGFzaFZhbGlkYXRlSW1hZ2UiLCJhamF4R2V0VkNvZGUiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJ0eXBlIiwiZXJyb3IiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJ2Y29kZSIsImF0dHIiLCJwb3B1cE1zZyIsIm1zZyIsImNvbmZpcm0iLCJ0aXRsZSIsIm1lc3NhZ2UiLCJidXR0b25zIiwiT0siLCJjbGFzcyIsInRleHQiLCJwb3B1cE1zZ1JlbG9hZCIsImFjdGlvbiIsImxvY2F0aW9uIiwiaHJlZiIsInBvcHVwQWxlcnRNc2ciLCJwb3B1cExvYWRpbmciLCJDaGVja0lucHV0Iiwic3RyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsInJlcGxhY2UiLCJhamF4VmlwQ2hlY2siLCJTbG90VXJsIiwiY3NzIiwiZGlzcGxheSIsIkVycm9yVmlwQ2hlY2tpbmciLCJoaWRlIiwiU2xvdCIsInJlcyIsInNwbGl0Iiwic2hvdyIsInZhbCIsInJlZ2lvbl9pbml0IiwiY2hhbmdlIiwib2IiLCJ0aGlzIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsImhlaWdodCIsImNpdHlpZCIsImZpbmQiLCJjY2MiLCJlYWNoIiwicmVtb3ZlQ2xhc3MiLCJjaGlsZHJlbiIsInByb3AiLCJhZGRDbGFzcyIsImh0bWwiLCJHZXRBQkMiLCJCdWlsZE1hcCIsIlN1Ym1pdCIsIl9fZG9Qb3N0QmFjayIsImRpc2FibGVMaW5rIiwiZSIsInByZXZlbnREZWZhdWx0IiwiaW5kZXgiLCJTaG9wSWQiLCJzdG9yZUluZm8iLCJzdG9yZW5hbWUiLCJhZGRyZXNzIiwibWFwIiwiQk1hcCIsIk1hcCIsInJlc2V0Iiwib3B0cyIsIkJNQVBfTkFWSUdBVElPTl9DT05UUk9MX0xBUkdFIiwiYWRkQ29udHJvbCIsIk5hdmlnYXRpb25Db250cm9sIiwiR2VvY29kZXIiLCJnZXRQb2ludCIsInBvaW50IiwiY2VudGVyQW5kWm9vbSIsIm1hcmtlciIsIk1hcmtlciIsImFkZE92ZXJsYXkiLCJsYWJlbCIsIkxhYmVsIiwiU2l6ZSIsInNldExhYmVsIiwiY2xpY2siLCJ2aXBDYXJkU2VydmljZSIsImluaXQiLCJzZXR1cEFwcG9pbnRtZW50QnV0dG9uIiwic2V0dXBHZXRQaG9uZUJ1dHRvbiIsInNldHVwVmNvZGVGdW5jdGlvbiIsInNldHVwVm9pY2VWY29kZUZ1bmN0aW9uIiwiaW5pdENhcmRWYWxpZGF0ZSIsInNldHVwQ2FyZFN1Ym1pdCIsInNldHVwRGF0YVN1Ym1pdCIsIm9uIiwiZXZlbnQiLCJpbmRleE9mIiwidmFsdWUiLCJhcHBlbmRUbyIsInNlbGVjdGVkQ2l0eSIsIk1hdGgiLCJyYW5kb20iLCJzb3VuZCIsImxvYWQiLCJwbGF5IiwiYmluZCIsInNldHVwRGVzY0NoZWNrIiwibWF4bGVuZ3RoIiwibWF4Q2hhcmFjdGVycyIsInN0YXR1c1RleHQiLCJzbGlkZXIiLCJ2YWxpZCIsImltZWlfc24iLCJpbWVpIiwic24iLCJsZW5ndGgiLCJ2YWxpZGF0b3IiLCJhZGRNZXRob2QiLCJlbGVtZW50IiwidG9Mb3dlckNhc2UiLCJ0ZXN0IiwialF1ZXJ5Iiwib3B0aW9uYWwiLCJlbWFpbHMiLCJpIiwic2luZ2xlRW1haWwiLCJtZXRob2RzIiwiZW1haWwiLCJjYWxsIiwidHJpbSIsIm1lc3NhZ2VzIiwibXVsdGllbWFpbHMiLCJ2YWxpZGF0ZSIsImVycm9yQ2xhc3MiLCJyZWFkeSIsIndpbmRvdyIsInJlc2l6ZSJdLCJtYXBwaW5ncyI6IkFBaVRBLFFBQVNBLG1CQUNMLFlBQ0FDLEdBQUUsbUJBQW1CQyxNQUFNLE9BQVNDLFVBQVUsSUFDOUNGLEVBQUUsbUJBQW1CQyxNQUFNLE9BQVNFLGNBQWMsSUFDbERILEVBQUUsdUJB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R0FHbkQsT0FEWSx5Q0FDRkUsS0FGQXZCLEtBT2RoSCxFQUFFbUksVUFBVUMsVUFBVSxzQkFBdUIsU0FBVXBCLEVBQU9xQixHQUcxRCxPQURZLG1DQUNGRSxLQUZBdkIsS0FPZGhILEVBQUVtSSxVQUFVQyxVQUFVLE9BQVEsU0FBVXBCLEVBQU9xQixHQUczQyxRQURZLDZDQUNERSxLQUZEdkIsS0FPZGhILEVBQUVtSSxVQUFVQyxVQUFVLGFBQWMsU0FBVXBCLEVBQU9xQixHQUdqRCxRQURZLHVCQUNERSxLQUZEdkIsS0FPZGhILEVBQUUsZUFBZW1KLFVBQ2JDLFdBQVksY0FleEIsT0FBT2hELEtBR1hwRyxHQUFFbUMsVUFBVWtILE1BQU0sV0FDZCxZQUNBakQsZ0JBQWVDLE9BQ2ZuRCxZQUFZLGtCQUFtQixjQUFlLGlCQUdsRGxELEVBQUVzSixRQUFRQyxPQUFPIiwiZmlsZSI6InZpcGNhcmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCByZWdpb25faW5pdCwgQk1hcCwgX19kb1Bvc3RCYWNrLCBCTUFQX05BVklHQVRJT05fQ09OVFJPTF9MQVJHRSovXHJcbi8qcmVnaW9uX2luaXQoKSBpbiB2aXBjYXJkLmNuLnByb3ZpbmNlLmpzKi9cclxudmFyIHZjb2RlID0gXCJcIjtcclxuJChcIiNTZXJ2aWNlVHlwZVwiKS52YWwoXCJob21lXCIpO1xyXG5cclxuJChcIiNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2xiX3N1Ym1pdFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICAkKFwiI2FkZHJlc3Nwcm92aW5jZVwiKS52YWwoJCgnI3NlbGVjdF9wcm92aW5jZSA6c2VsZWN0ZWQnKS50ZXh0KCkpO1xyXG4gICAgJChcIiNhZGRyZXNzY2l0eVwiKS52YWwoJCgnI3NlbGVjdF9jaXR5IDpzZWxlY3RlZCcpLnRleHQoKSk7XHJcbiAgICAkKFwiI2FkZHJlc3NkaXN0cmljdFwiKS52YWwoJCgnI3NlbGVjdF9hcmVhIDpzZWxlY3RlZCcpLnRleHQoKSk7XHJcbn0pO1xyXG5cclxudmFyIHZpcENhcmRTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgdmlwQ2FyZFNlcnZpY2UgPSB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2aXBDYXJkU2VydmljZS5zZXR1cEFwcG9pbnRtZW50QnV0dG9uKCk7XHJcbiAgICAgICAgICAgIHZpcENhcmRTZXJ2aWNlLnNldHVwR2V0UGhvbmVCdXR0b24oKTtcclxuICAgICAgICAgICAgdmlwQ2FyZFNlcnZpY2Uuc2V0dXBWY29kZUZ1bmN0aW9uKCk7XHJcbiAgICAgICAgICAgIHZpcENhcmRTZXJ2aWNlLnNldHVwVm9pY2VWY29kZUZ1bmN0aW9uKCk7XHJcbiAgICAgICAgICAgIHZpcENhcmRTZXJ2aWNlLmluaXRDYXJkVmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgdmlwQ2FyZFNlcnZpY2Uuc2V0dXBDYXJkU3VibWl0KCk7XHJcbiAgICAgICAgICAgIHZpcENhcmRTZXJ2aWNlLnNldHVwRGF0YVN1Ym1pdCgpO1xyXG4gICAgICAgICAgICBuZXcgUmVmbGFzaFZhbGlkYXRlSW1hZ2UoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldHVwQXBwb2ludG1lbnRCdXR0b246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkKCcuYXBwb2ludG1lbnQtYnRuLmluLWhvbWUnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICQoXCIjU2VydmljZVR5cGVcIikudmFsKFwiaG9tZVwiKTtcclxuICAgICAgICAgICAgICAgICQoJy5zdGVwcy12aXAtY2FyZC1pbmZvJykuc2hvdygxMDAsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vc2Nyb2xsIHRvIGZpbmFsIHN0ZXBcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2IgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBvYi5vZmZzZXQoKS50b3AgLSAkKCcuZC1oZWFkZXInKS5oZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0dXBHZXRQaG9uZUJ1dHRvbjogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAkKCcuYXBwb2ludG1lbnQtYnRuLmdldC1waG9uZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICQoXCIjU2VydmljZVR5cGVcIikudmFsKFwic3RvcmVcIik7XHJcbiAgICAgICAgICAgICAgICAkKCcuc3RlcHMtdmlwLWNhcmQtaW5mbycpLnNob3coMTAwLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3Njcm9sbCB0byBmaW5hbCBzdGVwXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogb2Iub2Zmc2V0KCkudG9wIC0gJCgnLmQtaGVhZGVyJykuaGVpZ2h0KClcclxuICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChcIiNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2RsQWxsQ2l0eSBvcHRpb25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5pbmRleE9mKFwiWzQ0XVwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIjxvcHRpb24gLz5cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHRoaXMudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLmFwcGVuZFRvKCQoJyNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX3NDaXR5JykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vYWRkIHNDaXR5IGFjdGlvblxyXG4gICAgICAgICAgICAkKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfc0NpdHlcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9PSBcIi0tXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjc2hvcGFyZWEnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT1yZFNob3BdOmNoZWNrZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENpdHkgPSAkKHRoaXMpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2NjID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2hvcGxpc3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PT0gc2VsZWN0ZWRDaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2NjID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignbGFiZWwnKS5jaGlsZHJlbignaW5wdXQnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydCgkKHRoaXMpLmF0dHIoJ2lkJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaG9wbGlzdCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdsYWJlbCcpLmNoaWxkcmVuKCcuZW5nLXRpdGxlJykuaHRtbChuZXcgR2V0QUJDKGNjYykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc2hvdycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2NjID0gY2NjICsgMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvL3Jlc2V0TWFwSGVpZ2h0KGNjYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9HZXRUaW1lU2xvdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNtYXAnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJ1aWxkTWFwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy9zaG9wbGlzdCBiaW5kIGNsaWNrIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICQoXCIuc2hvcGxpc3RcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIC8vcmVtb3ZlIG9yaWdpbmFsIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICAkKFwiLnNob3BsaXN0XCIpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgLy9BZGQgbmV3IHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbihcImxhYmVsXCIpLmNoaWxkcmVuKFwiaW5wdXRbdHlwZT1yYWRpb11cIikuYXR0cignY2hlY2tlZCcsICdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjbWFwJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgbmV3IEJ1aWxkTWFwKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy9CaW5kIG5leHQgc3RlcCBmb3IgZGF0ZSBzZWxlY3Rpb25cclxuICAgICAgICAgICAgJChcIiNidG5OZXh0SW5wdXREYXRhXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc3RlcHMtZW50ZXItdXNlci1pbmZvJykuc2hvdygxMDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3Njcm9sbCB0byBmaW5hbCBzdGVwXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogb2Iub2Zmc2V0KCkudG9wIC0gJCgnLmQtaGVhZGVyJykuaGVpZ2h0KClcclxuICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldHVwVmNvZGVGdW5jdGlvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL2luaXQgdGhlIGltYWdlXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2NuL3N1cHBvcnQvY2FwdGNhaGltZy5hc3B4P2FjdD1yZWYmcmVzPXZcIixcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEVycm9yUmVzZXJ2YXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB2Y29kZSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9JbWFnZTFcIikuYXR0cihcInNyY1wiLCBcIi9jbi9zdXBwb3J0L2NhcHRjYWhpbWcuYXNweD9cIiArIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy9iaW5kIHRoZSByZWZsYXNoIGJ1dHRvblxyXG4gICAgICAgICAgICAkKCcjcmVsb2FkaWNvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi9jbi9zdXBwb3J0L2NhcHRjYWhpbWcuYXNweD9hY3Q9cmVmJnJlcz12XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXJyb3JSZXNlcnZhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZjb2RlID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9JbWFnZTFcIikuYXR0cihcInNyY1wiLCBcIi9jbi9zdXBwb3J0L2NhcHRjYWhpbWcuYXNweD9cIiArIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldHVwVm9pY2VWY29kZUZ1bmN0aW9uOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJCgnI3NwZWFrZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjdm9pY2VjYXB0Y2hhJykuYXR0cihcInNyY1wiLCBcIi9jbi9zdXBwb3J0L2NhcHRjYWh2b2ljZS5hc3B4P3Zjb2RlPVwiICsgdmNvZGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvdW5kID0gJChcIiN2b2ljZWNhcHRjaGFcIilbMF07XHJcbiAgICAgICAgICAgICAgICBzb3VuZC5sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBzb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCcjdm9pY2VjYXB0Y2hhJykuYmluZChcInBsYXlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnNwZWFrZXItaWNvbi1hcmVhJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxvYWRpbmctc3Bpbi5jYXB0Y2hhLXBsYXknKS5jc3MoeyAnZGlzcGxheSc6ICdpbmxpbmUtYmxvY2snIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnI3ZvaWNlY2FwdGNoYScpLmJpbmQoXCJlbmRlZFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubG9hZGluZy1zcGluLmNhcHRjaGEtcGxheScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5zcGVha2VyLWljb24tYXJlYScpLnNob3coKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXR1cERlc2NDaGVjazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV90eHRfc0Rlc3hcIikubWF4bGVuZ3RoKHtcclxuICAgICAgICAgICAgICAgIG1heENoYXJhY3RlcnM6IDEwMDAsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiBcIuWJqemkmOWtl+WFg1wiLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVyOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0dXBDYXJkU3VibWl0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJCgnLnZhbGlkYXRlLWNhcmQtc3VibWl0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnI2FzcG5ldEZvcm0nKS52YWxpZCgpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltZWlfc24gPSAkKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfdHh0X0lNRUlfU05cIikudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltZWkgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzbiA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltZWlfc24ubGVuZ3RoID4gMTIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWVpID0gaW1laV9zbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc24gPSBpbWVpX3NuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhamF4VmlwQ2hlY2soJy9jbi9zdXBwb3J0L3ZpcHJlc2VydmF0aW9ud3MuYXNweD9pbWVpPScgKyBpbWVpICsgXCImc249XCIgKyBzbiArIFwiJmNhcmQ9XCIgKyAkKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfdHh0VmlwQ2FyZE51bWJlclwiKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0dXBEYXRhU3VibWl0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJCgnI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfbGJfc3VibWl0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJyNhc3BuZXRGb3JtJykudmFsaWQoKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2xiX3N1Ym1pdCcpLnJlbW92ZUNsYXNzKCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9sYl9zdWJtaXQnKS5iaW5kKCdjbGljaycsIGRpc2FibGVMaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9sYl9zdWJtaXQnKS5hZGRDbGFzcygnYnV0dG9uX2dyYXknKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cExvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAvL3RyeSB7IHRyYWNrU3VibWl0KCk7IH0gY2F0Y2ggKGVycikgeyB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9zZXRUaW1lb3V0KFwiU3VibWl0KClcIiwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX19kb1Bvc3RCYWNrKCdjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGxiX3N1Ym1pdCcsICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0Q2FyZFZhbGlkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBWY29kZU5hbWUgPSAnY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRWQ29kZSc7XHJcbiAgICAgICAgICAgICQudmFsaWRhdG9yLmFkZE1ldGhvZChcInZjb2RldmFsaWRhdGVcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGVsZW1lbnQudmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gdmNvZGUudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwidmlwY2FyZFwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciByZWdleCA9IC9eKD86W0EtWmEtejAtOV17MTF9KSQvO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS52YWxpZGF0b3IuYWRkTWV0aG9kKFwiZW1haWxmb3JtYXRcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25hbChlbGVtZW50KSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgZW1haWxzID0gdmFsdWUuc3BsaXQoL1s7LF0rLyk7IC8vIHNwbGl0IGVsZW1lbnQgYnkgLCBhbmQgO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW1haWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpbmdsZUVtYWlsID0gZW1haWxzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gdmFsaWQgJiYgalF1ZXJ5LnZhbGlkYXRvci5tZXRob2RzLmVtYWlsLmNhbGwodGhpcywgJC50cmltKHNpbmdsZUVtYWlsKSwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICBqUXVlcnkudmFsaWRhdG9yLm1lc3NhZ2VzLm11bHRpZW1haWxzXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICQudmFsaWRhdG9yLmFkZE1ldGhvZChcInNwZWNpYWxjaGFyc1wiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciByZWdleCA9IC9bYH4hQCMkJV4mKlxcKFxcKS1cXCs9XFxeXFxbXFxdXFx7XFx9XCI/XFwvOjssXSsvO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3Qoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwic3BlY2lhbGNoYXJzYWRkcmVzc1wiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciByZWdleCA9IC9bYH4hQCMkJV4mKlxcKz1cXF5cXFtcXF1cXHtcXH1cIj9cXC86O10rLztcclxuICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQudmFsaWRhdG9yLmFkZE1ldGhvZChcImltZWlcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVnZXggPSAvXig/OlswLTldezE0fXxbMC05XXsxNX18W0EtWmEtejAtOV17MTJ9fCkkLztcclxuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkLnZhbGlkYXRvci5hZGRNZXRob2QoXCJudW1iZXJvbmx5XCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlZ2V4ID0gL14oXFxzKnxbMC05XFwtIygpK10pKyQvO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJyNhc3BuZXRGb3JtJykudmFsaWRhdGUoe1xyXG4gICAgICAgICAgICAgICAgZXJyb3JDbGFzczogJ2Vycm9yIHVwJyxcclxuICAgICAgICAgICAgICAgIC8vIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbiAoZXJyb3IsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAvLyBzd2l0Y2ggKCQoZWxlbWVudCkuYXR0cignbmFtZScpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gICAgIGNhc2UgVmNvZGVOYW1lOlxyXG4gICAgICAgICAgICAgICAgLy8gICAgIC8vICAgICAgICAgZXJyb3IuaW5zZXJ0QWZ0ZXIoJCgnLmNhcHRjaGEgPiAuZW1haWwtaW5wdXQnKSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vICAgICAvLyAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vICAgICAvLyAgICAgICAgIGVycm9yLmluc2VydEFmdGVyKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB2aXBDYXJkU2VydmljZTtcclxufSgpKTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHZpcENhcmRTZXJ2aWNlLmluaXQoKTtcclxuICAgIHJlZ2lvbl9pbml0KFwic2VsZWN0X3Byb3ZpbmNlXCIsIFwic2VsZWN0X2NpdHlcIiwgXCJzZWxlY3RfYXJlYVwiKTtcclxufSk7XHJcblxyXG4kKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xyXG5cclxufSk7XHJcblxyXG5mdW5jdGlvbiBhZGRWYWxpZGF0ZVJ1bGUoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICAkKCdbaWQqPXR4dF9zTkFNRV0nKS5ydWxlcygnYWRkJywgeyByZXF1aXJlZDogdHJ1ZSB9KTtcclxuICAgICQoJ1tpZCo9dHh0X3NOQU1FXScpLnJ1bGVzKCdhZGQnLCB7IHNwZWNpYWxjaGFyczogdHJ1ZSB9KTtcclxuICAgICQoJ1tpZCo9dHh0X3NQaG9uZU51bV0nKS5ydWxlcygnYWRkJywgeyByZXF1aXJlZDogdHJ1ZSB9KTtcclxuICAgICQoJ1tpZCo9dHh0X3NQaG9uZU51bV0nKS5ydWxlcygnYWRkJywgeyBudW1iZXJvbmx5OiB0cnVlIH0pO1xyXG4gICAgJCgnW2lkKj10eHRfc0VhbWlsXScpLnJ1bGVzKCdhZGQnLCB7IHJlcXVpcmVkOiB0cnVlIH0pO1xyXG4gICAgJCgnW2lkKj10eHRfc0VhbWlsXScpLnJ1bGVzKCdhZGQnLCB7IGVtYWlsZm9ybWF0OiB0cnVlIH0pO1xyXG4gICAgJCgnW2lkKj10eHRfQWRkcmVzc10nKS5ydWxlcygnYWRkJywgeyByZXF1aXJlZDogdHJ1ZSB9KTtcclxuICAgICQoJ1tpZCo9dHh0X0FkZHJlc3NdJykucnVsZXMoJ2FkZCcsIHsgc3BlY2lhbGNoYXJzYWRkcmVzczogdHJ1ZSB9KTtcclxuICAgICQoJ1tpZCo9dHh0X3NEZXN4XScpLnJ1bGVzKCdhZGQnLCB7IHJlcXVpcmVkOiB0cnVlIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBSZWZsYXNoVmFsaWRhdGVJbWFnZSgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFqYXhHZXRWQ29kZSgpO1xyXG59XHJcbmZ1bmN0aW9uIGFqYXhHZXRWQ29kZSgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiBcIi9jbi9zdXBwb3J0L2NhcHRjYWhpbWcuYXNweD9hY3Q9cmVmJnJlcz12XCIsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy9FcnJvclJlc2VydmF0aW9uKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdmNvZGUgPSByZXNwb25zZTtcclxuICAgICAgICAgICAgJChcIiNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX0ltYWdlMVwiKS5hdHRyKFwic3JjXCIsIFwiL2NuL3N1cHBvcnQvY2FwdGNhaGltZy5hc3B4XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwb3B1cE1zZyhtc2cpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgICQuY29uZmlybSh7XHJcbiAgICAgICAgJ3RpdGxlJzogXCJcIixcclxuICAgICAgICAnbWVzc2FnZSc6IG1zZyxcclxuICAgICAgICAnYnV0dG9ucyc6IHtcclxuICAgICAgICAgICAgJ09LJzoge1xyXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzonYmx1ZS1idXR0b24nLFxyXG4gICAgICAgICAgICAgICAgJ3RleHQnOiAnT0snXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcG9wdXBNc2dSZWxvYWQobXNnKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICAkLmNvbmZpcm0oe1xyXG4gICAgICAgICd0aXRsZSc6IFwiXCIsXHJcbiAgICAgICAgJ21lc3NhZ2UnOiBtc2csXHJcbiAgICAgICAgJ2J1dHRvbnMnOiB7XHJcbiAgICAgICAgICAgICdPSyc6IHtcclxuICAgICAgICAgICAgICAgICdjbGFzcyc6ICdibHVlLWJ1dHRvbicsXHJcbiAgICAgICAgICAgICAgICAndGV4dCc6ICdPSycsXHJcbiAgICAgICAgICAgICAgICAnYWN0aW9uJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvcHVwQWxlcnRNc2codGl0bGUsIG1zZykge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgJC5jb25maXJtKHtcclxuICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAnbWVzc2FnZSc6IG1zZyxcclxuICAgICAgICAnYnV0dG9ucyc6IHtcclxuICAgICAgICAgICAgJ09LJzoge1xyXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzonYmx1ZS1idXR0b24nLFxyXG4gICAgICAgICAgICAgICAgJ3RleHQnOiAnT0snXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcG9wdXBMb2FkaW5nKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgJC5jb25maXJtKHtcclxuICAgICAgICAndGl0bGUnOiBcIlwiLFxyXG4gICAgICAgICdtZXNzYWdlJzogXCI8aW1nIHNyYz0nL2VrLWFzc2V0cy9yZXNwb25zaXZlL2ltZy9hamF4LWxvYWRlci5naWYnIHN0eWxlPSdkaXNwbGF5OiBibG9jazttYXJnaW4tbGVmdDogYXV0bzttYXJnaW4tcmlnaHQ6IGF1dG87JyAvPjxicj7otYTmlpnkvKDpgIHkuK0uLi4uLi5cIlxyXG5cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBDaGVja0lucHV0KCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgdmFyIHN0ciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV90eHRfc0Rlc3hcIikuaW5uZXJIVE1MO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX3R4dF9zRGVzeFwiKS5pbm5lckhUTUwgPSBzdHIucmVwbGFjZSgvPFtePl0uKj8+L2csICcnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWpheFZpcENoZWNrKFNsb3RVcmwpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgICQoJy52YWxpZGF0ZS1jYXJkLXN1Ym1pdCcpLmNzcyh7ICdkaXNwbGF5JzogJ25vbmUnIH0pO1xyXG4gICAgJCgnLmxvYWRpbmctc3Bpbi52aXAtY2hlY2snKS5jc3MoeyAnZGlzcGxheSc6ICdpbmxpbmUtYmxvY2snIH0pO1xyXG4gICAgLy9BamF4IHRpbWUgc2xvdFxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IFNsb3RVcmwsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbmV3IEVycm9yVmlwQ2hlY2tpbmcoKTtcclxuICAgICAgICAgICAgJCgnLnZhbGlkYXRlLWNhcmQtc3VibWl0JykuY3NzKHsgJ2Rpc3BsYXknOiAnaW5saW5lLWJsb2NrJyB9KTtcclxuICAgICAgICAgICAgJCgnLmxvYWRpbmctc3Bpbi52aXAtY2hlY2snKS5oaWRlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBTbG90ID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIHZhciByZXMgPSBTbG90LnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgaWYgKFNsb3QgPT09IFwiRXJyb3JcIikge1xyXG4gICAgICAgICAgICAgICAgLy9TaG93IEJvb2tpbmcgRXJyb3IgbXNnLCByZWxvYWQgdGhlIHRpbWVzbG90XHJcbiAgICAgICAgICAgICAgICBuZXcgRXJyb3JWaXBDaGVja2luZygpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnZhbGlkYXRlLWNhcmQtc3VibWl0JykuY3NzKHsgJ2Rpc3BsYXknOiAnaW5saW5lLWJsb2NrJyB9KTtcclxuICAgICAgICAgICAgICAgICQoJy5sb2FkaW5nLXNwaW4udmlwLWNoZWNrJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc1swXSA9PT0gXCIwXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cEFsZXJ0TXNnKFwi6aqM6K+B5aSx6LSlXCIsIFwi5oKo55qE5Y2h5Y+36aqM6K+B5aSx6LSl77yM5aaC6ZyA5pyN5Yqh6K+35rS9PGEgaHJlZj0naHR0cDovL3d3dy5odGMuY29tL2NuL2NvbnRhY3QvZW1haWwvJz7lrqLmnI3kurrlkZg8L2E+IFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcudmFsaWRhdGUtY2FyZC1zdWJtaXQnKS5jc3MoeyAnZGlzcGxheSc6ICdpbmxpbmUtYmxvY2snIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sb2FkaW5nLXNwaW4udmlwLWNoZWNrJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1sxXSA9PT0gXCIwXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNoZWNrYm94JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubmVlZGFjdGl2YXRlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNoZWNrYm94Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubmVlZGFjdGl2YXRlJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL2Rpc2FibGUgdGV4dGJveCBwcmV2ZW50IHR4dCB1cGRhdGVcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfdHh0VmlwQ2FyZE51bWJlclwiKS5hdHRyKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfdHh0X0lNRUlfU05cIikuYXR0cihcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX1ZDb2RlXCIpLmF0dHIoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJChcIiNTZXJ2aWNlVHlwZVwiKS52YWwoKSA9PT0gXCJob21lXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1syXSA9PT0gXCJIXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwQWxlcnRNc2coXCLpqozor4HlpLHotKVcIiwgXCLkurLvvIzkuZDkuqvniYjkuI3pgILlupTkuo7lv6vpgJLkuIrpl6jlj5bpgIHmnLrmnI3liqHlk6ZeX17vvIzor7fpgInmi6k8YnIvPuWIsOW6l+e7tOS/rlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy52YWxpZGF0ZS1jYXJkLXN1Ym1pdCcpLmNzcyh7ICdkaXNwbGF5JzogJ2lubGluZS1ibG9jaycgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGluZy1zcGluLnZpcC1jaGVjaycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hcHBvaW50bWVudC1idG4uZ2V0LXBob25lJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5mb3VyLXN0ZXBzLWFkZHJlc3NcIikuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgcHJvdmluY2Ugc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpb25faW5pdChcInNlbGVjdF9wcm92aW5jZVwiLCBcInNlbGVjdF9jaXR5XCIsIFwic2VsZWN0X2FyZWFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2FkZHJlc3Nwcm92aW5jZVwiKS52YWwoJCgnI3NlbGVjdF9wcm92aW5jZSA6c2VsZWN0ZWQnKS50ZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNhZGRyZXNzY2l0eVwiKS52YWwoJCgnI3NlbGVjdF9jaXR5IDpzZWxlY3RlZCcpLnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2FkZHJlc3NkaXN0cmljdFwiKS52YWwoJCgnI3NlbGVjdF9hcmVhIDpzZWxlY3RlZCcpLnRleHQoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgc0NpdHkgYWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NlbGVjdF9wcm92aW5jZVwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjYWRkcmVzc3Byb3ZpbmNlXCIpLnZhbCgkKCcjc2VsZWN0X3Byb3ZpbmNlIDpzZWxlY3RlZCcpLnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2VsZWN0X2NpdHlcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2FkZHJlc3NjaXR5XCIpLnZhbCgkKCcjc2VsZWN0X2NpdHkgOnNlbGVjdGVkJykudGV4dCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzZWxlY3RfYXJlYVwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjYWRkcmVzc2Rpc3RyaWN0XCIpLnZhbCgkKCcjc2VsZWN0X2FyZWEgOnNlbGVjdGVkJykudGV4dCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zdGVwcy1lbnRlci11c2VyLWluZm8nKS5zaG93KDEwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2Nyb2xsIHRvIGZpbmFsIHN0ZXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2IgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBvYi5vZmZzZXQoKS50b3AgLSAkKCcuZC1oZWFkZXInKS5oZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwQWxlcnRNc2coXCLpqozor4HmiJDlip9cIiwgXCLor7fnu6fnu63loavlhaXmgqjnmoTmlLbku7botYTmlplcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hcHBvaW50bWVudC1idG4uaW4taG9tZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5mb3VyLXN0ZXBzLWFkZHJlc3NcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEFsZXJ0TXNnKFwi6aqM6K+B5oiQ5YqfXCIsIFwi6K+36YCJ5oup56a75oKo5pyA6L+R55qE572R54K5XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNpdHlpZCA9ICQoXCIjY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9zQ2l0eVwiKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG9wYXJlYScpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNjYyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zaG9wbGlzdCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignaWQnKSA9PT0gY2l0eWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNjYyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2hvcGxpc3QnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignbGFiZWwnKS5jaGlsZHJlbignaW5wdXQnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdsYWJlbCcpLmNoaWxkcmVuKCcuZW5nLXRpdGxlJykuaHRtbChuZXcgR2V0QUJDKGNjYykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjYyA9IGNjYyArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjbWFwJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQnVpbGRNYXAoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zdGVwcy1zZWxlY3Qtc3RvcmUtaW5mbycpLnNob3coMTAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Njcm9sbCB0byBmaW5hbCBzdGVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2IgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogb2Iub2Zmc2V0KCkudG9wIC0gJCgnLmQtaGVhZGVyJykuaGVpZ2h0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKCcubG9hZGluZy1zcGluLnZpcC1jaGVjaycpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9hZGQgbmV4dCBmb3JtIHZhbGlkYXRpb25cclxuICAgICAgICAgICAgICAgICAgICBhZGRWYWxpZGF0ZVJ1bGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBFcnJvclZpcENoZWNraW5nKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgcG9wdXBBbGVydE1zZyhcIumqjOivgemUmeivr1wiLCBcIuebruWJjVZJUOmqjOivgeacuuWItuaaguaXtuaXoOazleS9v+eUqO+8jOaIkeS7rOato+WcqOWFqOWKm+S/ruW+qeS4reivt++8jOWmgumcgOe0p+aApeacjeWKoeivt+a0vTxhIGhyZWY9J2h0dHA6Ly93d3cuaHRjLmNvbS9jbi9jb250YWN0L2VtYWlsLyc+5a6i5pyN5Lq65ZGYPC9hPiBcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFN1Ym1pdCgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIF9fZG9Qb3N0QmFjaygnY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9sYl9zdWJtaXQnLCAnJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc2FibGVMaW5rKGUpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIC8vIGNhbmNlbHMgdGhlIGV2ZW50XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldEFCQyhpbmRleCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgdmFyIGFyciA9IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLCAnWScsICdaJ107XHJcbiAgICByZXR1cm4gYXJyW2luZGV4XTtcclxufVxyXG5cclxuZnVuY3Rpb24gQnVpbGRNYXAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICB2YXIgY291bnRyeWlkID0gXCI0NFwiO1xyXG4gICAgdmFyIFNob3BJZCA9ICQoJ2lucHV0W25hbWU9cmRTaG9wXTpjaGVja2VkJykudmFsKCk7XHJcbiAgICAkKFwiI3Nob3BpZFwiKS52YWwoU2hvcElkKTtcclxuICAgIHZhciBzdG9yZUluZm8gPSAkKFwiI3Nob3BcIiArIFNob3BJZCkudGV4dCgpLnJlcGxhY2UoXCIgLSBcIiwgXCIjXCIpO1xyXG4gICAgdmFyIGluZm9zID0gc3RvcmVJbmZvLnNwbGl0KFwiI1wiKTtcclxuICAgIHZhciBzdG9yZW5hbWUgPSAkKFwiI3Nob3BcIiArIFNob3BJZCkuY2hpbGRyZW4oXCJkaXYgLmxvY2F0aW9uLXRpdGxlXCIpLmh0bWwoKTtcclxuICAgIHZhciBhZGRyZXNzID0gJChcIiNzaG9wXCIgKyBTaG9wSWQpLmNoaWxkcmVuKFwiZGl2IC5sb2NhdGlvbi10ZXh0XCIpLmh0bWwoKTtcclxuICAgIC8vaWYgaXMgQ2hpbmEsIHVzZSBiYWlkdSBtYXAsIGVsc2UgdXNlIGdvb2dsZSBtYXBcclxuICAgIGlmIChjb3VudHJ5aWQgPT09IFwiNDRcIikge1xyXG4gICAgICAgIC8vIHZhciBtYXAgYXBpXHJcbiAgICAgICAgdmFyIG1hcCA9IG5ldyBCTWFwLk1hcChcIm1hcFwiKTtcclxuICAgICAgICBtYXAucmVzZXQoKTtcclxuICAgICAgICB2YXIgb3B0cyA9IHsgdHlwZTogQk1BUF9OQVZJR0FUSU9OX0NPTlRST0xfTEFSR0UgfTtcclxuICAgICAgICBtYXAuYWRkQ29udHJvbChuZXcgQk1hcC5OYXZpZ2F0aW9uQ29udHJvbChvcHRzKSk7XHJcbiAgICAgICAgLy8gY3JlYXRlIGFkZHJlc3MgdHJhbnNsYXRlciBpbnN0YW5jZVxyXG4gICAgICAgIHZhciBteUdlbyA9IG5ldyBCTWFwLkdlb2NvZGVyKCk7XHJcbiAgICAgICAgbXlHZW8uZ2V0UG9pbnQoYWRkcmVzcywgZnVuY3Rpb24gKHBvaW50KSB7XHJcbiAgICAgICAgICAgIGlmIChwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgbWFwLmNlbnRlckFuZFpvb20ocG9pbnQsIDE2KTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgQk1hcC5NYXJrZXIocG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgbWFwLmFkZE92ZXJsYXkobWFya2VyKTtcclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IG5ldyBCTWFwLkxhYmVsKHN0b3JlbmFtZSwgeyBvZmZzZXQ6IG5ldyBCTWFwLlNpemUoLTE3LCAtNDApIH0pO1xyXG4gICAgICAgICAgICAgICAgbWFya2VyLnNldExhYmVsKGxhYmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIFwiXCIpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==
